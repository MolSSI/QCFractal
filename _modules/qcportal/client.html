
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>qcportal.client &#8212; QCArchive 0.50b4.post22+g98d898c3 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/qcportal/client';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">

  
  
  
  
  
  
  

  
    <img src="../../_static/molssi_main_logo.png" class="logo__image only-light" alt="Logo image">
    <img src="../../_static/molssi_main_logo_inverted_white.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../user_guide/index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../admin_guide/index.html">
                        Admin Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../web_api/index.html">
                        Web API
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../developer_guide/index.html">
                        Developer Guide
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://molssi.org">
                    MolSSI
                  </a>
                </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/MolSSI/QCFractal" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../user_guide/index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../admin_guide/index.html">
                        Admin Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../web_api/index.html">
                        Web API
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../developer_guide/index.html">
                        Developer Guide
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://molssi.org">
                    MolSSI
                  </a>
                </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/MolSSI/QCFractal" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <h1>Source code for qcportal.client</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Any</span><span class="p">,</span>
    <span class="n">Dict</span><span class="p">,</span>
    <span class="n">List</span><span class="p">,</span>
    <span class="n">Optional</span><span class="p">,</span>
    <span class="n">Tuple</span><span class="p">,</span>
    <span class="n">Union</span><span class="p">,</span>
    <span class="n">Sequence</span><span class="p">,</span>
    <span class="n">Iterable</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">qcportal.gridoptimization</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">GridoptimizationKeywords</span><span class="p">,</span>
    <span class="n">GridoptimizationAddBody</span><span class="p">,</span>
    <span class="n">GridoptimizationRecord</span><span class="p">,</span>
    <span class="n">GridoptimizationQueryFilters</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">qcportal.manybody</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ManybodyKeywords</span><span class="p">,</span>
    <span class="n">ManybodyRecord</span><span class="p">,</span>
    <span class="n">ManybodyAddBody</span><span class="p">,</span>
    <span class="n">ManybodyQueryFilters</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">qcportal.neb</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">NEBKeywords</span><span class="p">,</span>
    <span class="n">NEBAddBody</span><span class="p">,</span>
    <span class="n">NEBQueryFilters</span><span class="p">,</span>
    <span class="n">NEBRecord</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">qcportal.optimization</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">OptimizationProtocols</span><span class="p">,</span>
    <span class="n">OptimizationRecord</span><span class="p">,</span>
    <span class="n">OptimizationQueryFilters</span><span class="p">,</span>
    <span class="n">OptimizationSpecification</span><span class="p">,</span>
    <span class="n">OptimizationAddBody</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">qcportal.reaction</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ReactionAddBody</span><span class="p">,</span>
    <span class="n">ReactionRecord</span><span class="p">,</span>
    <span class="n">ReactionKeywords</span><span class="p">,</span>
    <span class="n">ReactionQueryFilters</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">qcportal.singlepoint</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">QCSpecification</span><span class="p">,</span>
    <span class="n">SinglepointRecord</span><span class="p">,</span>
    <span class="n">SinglepointAddBody</span><span class="p">,</span>
    <span class="n">SinglepointQueryFilters</span><span class="p">,</span>
    <span class="n">SinglepointDriver</span><span class="p">,</span>
    <span class="n">SinglepointProtocols</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">qcportal.torsiondrive</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">TorsiondriveKeywords</span><span class="p">,</span>
    <span class="n">TorsiondriveAddBody</span><span class="p">,</span>
    <span class="n">TorsiondriveRecord</span><span class="p">,</span>
    <span class="n">TorsiondriveQueryFilters</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.auth</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">UserInfo</span><span class="p">,</span>
    <span class="n">RoleInfo</span><span class="p">,</span>
    <span class="n">GroupInfo</span><span class="p">,</span>
    <span class="n">is_valid_username</span><span class="p">,</span>
    <span class="n">is_valid_password</span><span class="p">,</span>
    <span class="n">is_valid_rolename</span><span class="p">,</span>
    <span class="n">is_valid_groupname</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.base_models</span> <span class="kn">import</span> <span class="n">CommonBulkGetNamesBody</span><span class="p">,</span> <span class="n">CommonBulkGetBody</span><span class="p">,</span> <span class="n">ProjURLParameters</span>
<span class="kn">from</span> <span class="nn">.cache</span> <span class="kn">import</span> <span class="n">PortalCache</span>
<span class="kn">from</span> <span class="nn">.client_base</span> <span class="kn">import</span> <span class="n">PortalClientBase</span>
<span class="kn">from</span> <span class="nn">.dataset_models</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseDataset</span><span class="p">,</span>
    <span class="n">DatasetQueryModel</span><span class="p">,</span>
    <span class="n">DatasetQueryRecords</span><span class="p">,</span>
    <span class="n">DatasetDeleteParams</span><span class="p">,</span>
    <span class="n">DatasetAddBody</span><span class="p">,</span>
    <span class="n">dataset_from_datamodel</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.internal_jobs</span> <span class="kn">import</span> <span class="n">InternalJob</span><span class="p">,</span> <span class="n">InternalJobQueryFilters</span><span class="p">,</span> <span class="n">InternalJobQueryIterator</span><span class="p">,</span> <span class="n">InternalJobStatusEnum</span>
<span class="kn">from</span> <span class="nn">.managers</span> <span class="kn">import</span> <span class="n">ManagerQueryFilters</span><span class="p">,</span> <span class="n">ManagerQueryIterator</span><span class="p">,</span> <span class="n">ComputeManager</span>
<span class="kn">from</span> <span class="nn">.metadata_models</span> <span class="kn">import</span> <span class="n">UpdateMetadata</span><span class="p">,</span> <span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">DeleteMetadata</span>
<span class="kn">from</span> <span class="nn">.molecules</span> <span class="kn">import</span> <span class="n">Molecule</span><span class="p">,</span> <span class="n">MoleculeIdentifiers</span><span class="p">,</span> <span class="n">MoleculeModifyBody</span><span class="p">,</span> <span class="n">MoleculeQueryIterator</span><span class="p">,</span> <span class="n">MoleculeQueryFilters</span>
<span class="kn">from</span> <span class="nn">.record_models</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">RecordStatusEnum</span><span class="p">,</span>
    <span class="n">PriorityEnum</span><span class="p">,</span>
    <span class="n">RecordQueryFilters</span><span class="p">,</span>
    <span class="n">RecordModifyBody</span><span class="p">,</span>
    <span class="n">RecordDeleteBody</span><span class="p">,</span>
    <span class="n">RecordRevertBody</span><span class="p">,</span>
    <span class="n">BaseRecord</span><span class="p">,</span>
    <span class="n">RecordQueryIterator</span><span class="p">,</span>
    <span class="n">records_from_datamodels</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.serverinfo</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AccessLogQueryFilters</span><span class="p">,</span>
    <span class="n">AccessLogSummaryFilters</span><span class="p">,</span>
    <span class="n">AccessLogSummaryEntry</span><span class="p">,</span>
    <span class="n">AccessLogSummary</span><span class="p">,</span>
    <span class="n">AccessLogQueryIterator</span><span class="p">,</span>
    <span class="n">ErrorLogQueryFilters</span><span class="p">,</span>
    <span class="n">ErrorLogQueryIterator</span><span class="p">,</span>
    <span class="n">ServerStatsQueryFilters</span><span class="p">,</span>
    <span class="n">ServerStatsQueryIterator</span><span class="p">,</span>
    <span class="n">DeleteBeforeDateBody</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">make_list</span>


<div class="viewcode-block" id="PortalClient"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient">[docs]</a><span class="k">class</span> <span class="nc">PortalClient</span><span class="p">(</span><span class="n">PortalClientBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main class for interacting with a QCArchive server</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">address</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;https://api.qcarchive.molssi.org&quot;</span><span class="p">,</span>
        <span class="n">username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">show_motd</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        address</span>
<span class="sd">            The IP and port of the FractalServer instance (&quot;192.168.1.1:8888&quot;)</span>
<span class="sd">        username</span>
<span class="sd">            The username to authenticate with.</span>
<span class="sd">        password</span>
<span class="sd">            The password to authenticate with.</span>
<span class="sd">        verify</span>
<span class="sd">            Verifies the SSL connection with a third party server. This may be False if a</span>
<span class="sd">            FractalServer was not provided an SSL certificate and defaults back to self-signed</span>
<span class="sd">            SSL keys.</span>
<span class="sd">        show_motd</span>
<span class="sd">            If a Message-of-the-Day is available, display it</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">PortalClientBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">verify</span><span class="p">,</span> <span class="n">show_motd</span><span class="p">)</span>
        <span class="c1"># self._cache = PortalCache(self, cachedir=cache, max_memcache_size=max_memcache_size)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A short representation of the current PortalClient.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The desired representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="s2">&quot;PortalClient(server_name=&#39;</span><span class="si">{}</span><span class="s2">&#39;, address=&#39;</span><span class="si">{}</span><span class="s2">&#39;, username=&#39;</span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">_repr_html_</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

        <span class="n">output</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        &lt;h3&gt;PortalClient&lt;/h3&gt;</span>
<span class="s2">        &lt;ul&gt;</span>
<span class="s2">          &lt;li&gt;&lt;b&gt;Server:   &amp;nbsp; &lt;/b&gt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server_name</span><span class="si">}</span><span class="s2">&lt;/li&gt;</span>
<span class="s2">          &lt;li&gt;&lt;b&gt;Address:  &amp;nbsp; &lt;/b&gt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2">&lt;/li&gt;</span>
<span class="s2">          &lt;li&gt;&lt;b&gt;Username: &amp;nbsp; &lt;/b&gt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="si">}</span><span class="s2">&lt;/li&gt;</span>
<span class="s2">        &lt;/ul&gt;</span>
<span class="s2">        &quot;&quot;&quot;</span>

        <span class="c1"># postprocess due to raw spacing above</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">substr</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">substr</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)])</span>

    <span class="c1"># @property</span>
    <span class="c1"># def cache(self):</span>
    <span class="c1">#    if self._cache.cachedir is not None:</span>
    <span class="c1">#        return os.path.relpath(self._cache.cachedir)</span>
    <span class="c1">#    else:</span>
    <span class="c1">#        return None</span>

    <span class="c1"># TODO - reimplement</span>
    <span class="c1"># def _get_with_cache(self, func, id, missing_ok, entity_type, include=None):</span>
    <span class="c1">#    str_id = make_str(id)</span>
    <span class="c1">#    ids = make_list(str_id)</span>

    <span class="c1">#    # pass through the cache first</span>
    <span class="c1">#    # remove any ids that were found in cache</span>
    <span class="c1">#    # if `include` filters passed, don&#39;t use cache, just query DB, as it&#39;s often faster</span>
    <span class="c1">#    # for a few fields</span>
    <span class="c1">#    if include is None:</span>
    <span class="c1">#        cached = self._cache.get(ids, entity_type=entity_type)</span>
    <span class="c1">#    else:</span>
    <span class="c1">#        cached = {}</span>

    <span class="c1">#    for i in cached:</span>
    <span class="c1">#        ids.remove(i)</span>

    <span class="c1">#    # if all ids found in cache, no need to go further</span>
    <span class="c1">#    if len(ids) == 0:</span>
    <span class="c1">#        if isinstance(id, list):</span>
    <span class="c1">#            return [cached[i] for i in str_id]</span>
    <span class="c1">#        else:</span>
    <span class="c1">#            return cached[str_id]</span>

    <span class="c1">#    # molecule getting does *not* support &quot;include&quot;</span>
    <span class="c1">#    if include is None:</span>
    <span class="c1">#        payload = {</span>
    <span class="c1">#            &quot;data&quot;: {&quot;ids&quot;: ids},</span>
    <span class="c1">#        }</span>
    <span class="c1">#    else:</span>
    <span class="c1">#        if &quot;ids&quot; not in include:</span>
    <span class="c1">#            include.append(&quot;ids&quot;)</span>

    <span class="c1">#        payload = {</span>
    <span class="c1">#            &quot;meta&quot;: {&quot;includes&quot;: include},</span>
    <span class="c1">#            &quot;data&quot;: {&quot;ids&quot;: ids},</span>
    <span class="c1">#        }</span>

    <span class="c1">#    results, to_cache = func(payload)</span>

    <span class="c1">#    # we only cache if no field filtering was done</span>
    <span class="c1">#    if include is None:</span>
    <span class="c1">#        self._cache.put(to_cache, entity_type=entity_type)</span>

    <span class="c1">#    # combine cached records with queried results</span>
    <span class="c1">#    results.update(cached)</span>

    <span class="c1">#    # check that we have results for all ids asked for</span>
    <span class="c1">#    missing = set(make_list(str_id)) - set(results.keys())</span>

    <span class="c1">#    if missing and not missing_ok:</span>
    <span class="c1">#        raise KeyError(f&quot;No objects found for `id`: {missing}&quot;)</span>

    <span class="c1">#    # order the results by input id list</span>
    <span class="c1">#    if isinstance(id, list):</span>
    <span class="c1">#        ordered = [results.get(i, None) for i in str_id]</span>
    <span class="c1">#    else:</span>
    <span class="c1">#        ordered = results.get(str_id, None)</span>

    <span class="c1">#    return ordered</span>

<div class="viewcode-block" id="PortalClient.get_server_information"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_server_information">[docs]</a>    <span class="k">def</span> <span class="nf">get_server_information</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Request general information about the server</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Server information.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Request the info, and store here for later use</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/information&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

    <span class="c1">#################################################</span>
    <span class="c1"># Message-of-the-Day (MOTD)</span>
    <span class="c1">#################################################</span>
<div class="viewcode-block" id="PortalClient.get_motd"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_motd">[docs]</a>    <span class="k">def</span> <span class="nf">get_motd</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the Message-of-the-Day (MOTD) from the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/motd&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.set_motd"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.set_motd">[docs]</a>    <span class="k">def</span> <span class="nf">set_motd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_motd</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the Message-of-the-Day (MOTD) on the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;put&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/motd&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">new_motd</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># Datasets</span>
    <span class="c1">##############################################################</span>
<div class="viewcode-block" id="PortalClient.list_datasets"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.list_datasets">[docs]</a>    <span class="k">def</span> <span class="nf">list_datasets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;get&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;v1/datasets&quot;</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_dataset"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_dataset">[docs]</a>    <span class="k">def</span> <span class="nf">get_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dataset_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="n">DatasetQueryModel</span><span class="p">(</span><span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span> <span class="n">dataset_type</span><span class="o">=</span><span class="n">dataset_type</span><span class="p">)</span>

        <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;v1/datasets/query&quot;</span><span class="p">,</span>
            <span class="n">DatasetQueryModel</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
            <span class="n">payload</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">dataset_from_datamodel</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.query_dataset_records"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_dataset_records">[docs]</a>    <span class="k">def</span> <span class="nf">query_dataset_records</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">record_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
        <span class="n">dataset_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;record_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_id</span><span class="p">),</span>
            <span class="s2">&quot;dataset_type&quot;</span><span class="p">:</span> <span class="n">dataset_type</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;v1/datasets/queryrecords&quot;</span><span class="p">,</span>
            <span class="n">DatasetQueryRecords</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">],</span>
            <span class="n">payload</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_dataset_by_id"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_dataset_by_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_dataset_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>

        <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;get&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;v1/datasets/</span><span class="si">{</span><span class="n">dataset_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">dataset_from_datamodel</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_dataset_status_by_id"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_dataset_status_by_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_dataset_status_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;get&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;v1/datasets/</span><span class="si">{</span><span class="n">dataset_id</span><span class="si">}</span><span class="s2">/status&quot;</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">ProjURLParameters</span><span class="p">,</span>
            <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.add_dataset"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_dataset">[docs]</a>    <span class="k">def</span> <span class="nf">add_dataset</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tagline</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">provenance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">visibility</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">default_tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="n">default_priority</span><span class="p">:</span> <span class="n">PriorityEnum</span> <span class="o">=</span> <span class="n">PriorityEnum</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseDataset</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tagline</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tagline</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tags</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">group</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">group</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
        <span class="k">if</span> <span class="n">provenance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">provenance</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="n">DatasetAddBody</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">tagline</span><span class="o">=</span><span class="n">tagline</span><span class="p">,</span>
            <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
            <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">,</span>
            <span class="n">provenance</span><span class="o">=</span><span class="n">provenance</span><span class="p">,</span>
            <span class="n">visibility</span><span class="o">=</span><span class="n">visibility</span><span class="p">,</span>
            <span class="n">default_tag</span><span class="o">=</span><span class="n">default_tag</span><span class="p">,</span>
            <span class="n">default_priority</span><span class="o">=</span><span class="n">default_priority</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">owner_group</span><span class="o">=</span><span class="n">owner_group</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">ds_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/datasets/</span><span class="si">{</span><span class="n">dataset_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">DatasetAddBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dataset_by_id</span><span class="p">(</span><span class="n">ds_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.delete_dataset"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.delete_dataset">[docs]</a>    <span class="k">def</span> <span class="nf">delete_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">delete_records</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">DatasetDeleteParams</span><span class="p">(</span><span class="n">delete_records</span><span class="o">=</span><span class="n">delete_records</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/datasets/</span><span class="si">{</span><span class="n">dataset_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">DatasetDeleteParams</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># Molecules</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.get_molecules"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_molecules">[docs]</a>    <span class="k">def</span> <span class="nf">get_molecules</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">molecule_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
        <span class="n">missing_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">Molecule</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">Molecule</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Obtains molecules with the specified IDs from the server</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        molecule_ids</span>
<span class="sd">            A single molecule ID, or a list (or other sequence) of molecule IDs</span>
<span class="sd">        missing_ok</span>
<span class="sd">            If set to True, then missing molecules will be tolerated, and the returned list of</span>
<span class="sd">            Molecules will contain None for the corresponding IDs that were not found.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Molecules, in the same order as the requested ids.</span>
<span class="sd">            If given a sequence of ids, the return value will be a list.</span>
<span class="sd">            Otherwise, it will be a single Molecule.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_single</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">molecule_ids</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span>

        <span class="n">molecule_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">molecule_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">molecule_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">CommonBulkGetBody</span><span class="p">(</span><span class="n">ids</span><span class="o">=</span><span class="n">molecule_ids</span><span class="p">,</span> <span class="n">missing_ok</span><span class="o">=</span><span class="n">missing_ok</span><span class="p">)</span>
        <span class="n">mols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/molecules/bulkGet&quot;</span><span class="p">,</span> <span class="n">CommonBulkGetBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">Molecule</span><span class="p">]],</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">is_single</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mols</span></div>

<div class="viewcode-block" id="PortalClient.query_molecules"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_molecules">[docs]</a>    <span class="k">def</span> <span class="nf">query_molecules</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">molecule_hash</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">molecular_formula</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">identifiers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MoleculeQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query molecules by attributes.</span>

<span class="sd">        Do not count on the returned molecules being in any particular order.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        molecule_hash</span>
<span class="sd">            Queries molecules by hash</span>
<span class="sd">        molecular_formula</span>
<span class="sd">            Queries molecules by molecular formula.</span>
<span class="sd">            Molecular formulas are not order-sensitive (e.g. &quot;H2O == OH2 != Oh2&quot;).</span>
<span class="sd">        identifiers</span>
<span class="sd">            Additional identifiers to search for (smiles, etc)</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of Molecules to return. Note that the server limit is always obeyed.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;molecule_hash&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">molecule_hash</span><span class="p">),</span>
            <span class="s2">&quot;molecular_formula&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">molecular_formula</span><span class="p">),</span>
            <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">identifiers</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;identifiers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">identifiers</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">MoleculeQueryFilters</span><span class="p">(</span><span class="o">**</span><span class="n">filter_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">MoleculeQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.add_molecules"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_molecules">[docs]</a>    <span class="k">def</span> <span class="nf">add_molecules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">molecules</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Molecule</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add molecules to the server database</span>

<span class="sd">        If the same molecule (defined by having the same hash) already exists, then the existing</span>
<span class="sd">        molecule is kept and that particular molecule is not added.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        molecules</span>
<span class="sd">            A list of Molecules to add to the server.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Metadata about what was inserted, and a list of IDs of the molecules</span>
<span class="sd">            in the same order as the `molecules` parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">molecules</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">InsertMetadata</span><span class="p">(),</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">molecules</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;add_molecules&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot add </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">molecules</span><span class="p">)</span><span class="si">}</span><span class="s2"> molecules - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;add_molecules&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">mols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/molecules/bulkCreate&quot;</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">Molecule</span><span class="p">],</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
            <span class="n">make_list</span><span class="p">(</span><span class="n">molecules</span><span class="p">),</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">mols</span></div>

<div class="viewcode-block" id="PortalClient.modify_molecule"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.modify_molecule">[docs]</a>    <span class="k">def</span> <span class="nf">modify_molecule</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">molecule_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">comment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">identifiers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">MoleculeIdentifiers</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">overwrite_identifiers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UpdateMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modify molecules on the server</span>

<span class="sd">        This is only capable of updating the name, comment, and identifiers fields (except molecule_hash</span>
<span class="sd">        and molecular formula).</span>

<span class="sd">        If a molecule with that id does not exist, an exception is raised</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        molecule_id</span>
<span class="sd">            ID of the molecule to modify</span>
<span class="sd">        name</span>
<span class="sd">            New name for the molecule. If None, name is not changed.</span>
<span class="sd">        comment</span>
<span class="sd">            New comment for the molecule. If None, comment is not changed</span>
<span class="sd">        identifiers</span>
<span class="sd">            A new set of identifiers for the molecule</span>
<span class="sd">        overwrite_identifiers</span>
<span class="sd">            If True, the identifiers of the molecule are set to be those given exactly (ie, identifiers</span>
<span class="sd">            that exist in the DB but not in the new set will be removed). Otherwise, the new set of</span>
<span class="sd">            identifiers is merged into the existing ones. Note that molecule_hash and molecular_formula</span>
<span class="sd">            are never removed.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Metadata about the modification/update.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="n">comment</span><span class="p">,</span>
            <span class="s2">&quot;identifiers&quot;</span><span class="p">:</span> <span class="n">identifiers</span><span class="p">,</span>
            <span class="s2">&quot;overwrite_identifiers&quot;</span><span class="p">:</span> <span class="n">overwrite_identifiers</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;patch&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/molecules/</span><span class="si">{</span><span class="n">molecule_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">MoleculeModifyBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">UpdateMetadata</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.delete_molecules"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.delete_molecules">[docs]</a>    <span class="k">def</span> <span class="nf">delete_molecules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">molecule_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">DeleteMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deletes molecules from the server</span>

<span class="sd">        This will not delete any molecules that are in use</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        molecule_ids</span>
<span class="sd">            An id or list of ids to query.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Metadata about what was deleted</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">molecule_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">molecule_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">molecule_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DeleteMetadata</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/molecules/bulkDelete&quot;</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="n">DeleteMetadata</span><span class="p">,</span> <span class="n">molecule_ids</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># General record functions</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.get_records"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_records">[docs]</a>    <span class="k">def</span> <span class="nf">get_records</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
        <span class="n">missing_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">BaseRecord</span><span class="p">]],</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BaseRecord</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain records of all types with specified IDs</span>

<span class="sd">        This function will return record objects of the given ID no matter</span>
<span class="sd">        what the type is. All records are unique by ID (ie, an optimization will never</span>
<span class="sd">        have the same ID as a singlepoint).</span>

<span class="sd">        Records will be returned in the same order as the record ids.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_ids</span>
<span class="sd">            Single ID or sequence/list of records to obtain</span>
<span class="sd">        missing_ok</span>
<span class="sd">            If set to True, then missing records will be tolerated, and the returned</span>
<span class="sd">            records will contain None for the corresponding IDs that were not found.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            If a single ID was specified, returns just that record. Otherwise, returns</span>
<span class="sd">            a list of records.  If missing_ok was specified, None will be substituted for a record</span>
<span class="sd">            that was not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_single</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;get_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot get </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;get_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">record_ids</span><span class="p">,</span> <span class="s2">&quot;missing_ok&quot;</span><span class="p">:</span> <span class="n">missing_ok</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">BaseRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">record_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/bulkGet&quot;</span><span class="p">,</span>
            <span class="n">CommonBulkGetBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">records</span> <span class="o">=</span> <span class="n">records_from_datamodels</span><span class="p">(</span><span class="n">record_data</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_single</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span></div>

<div class="viewcode-block" id="PortalClient.query_records"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_records">[docs]</a>    <span class="k">def</span> <span class="nf">query_records</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">record_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">record_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">manager_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">child_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query records of all types based on common fields</span>

<span class="sd">        This is a general query of all record types, so it can only filter by fields</span>
<span class="sd">        that are common among all records.</span>

<span class="sd">        Do not count on the returned records being in any particular order.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_id</span>
<span class="sd">            Query records whose ID is in the given list</span>
<span class="sd">        record_type</span>
<span class="sd">            Query records whose type is in the given list</span>
<span class="sd">        manager_name</span>
<span class="sd">            Query records that were completed (or are currently runnning) on a manager is in the given list</span>
<span class="sd">        status</span>
<span class="sd">            Query records whose status is in the given list</span>
<span class="sd">        dataset_id</span>
<span class="sd">            Query records that are part of a dataset is in the given list</span>
<span class="sd">        parent_id</span>
<span class="sd">            Query records that have a parent is in the given list</span>
<span class="sd">        child_id</span>
<span class="sd">            Query records that have a child is in the given list</span>
<span class="sd">        created_before</span>
<span class="sd">            Query records that were created before the given date/time</span>
<span class="sd">        created_after</span>
<span class="sd">            Query records that were created after the given date/time</span>
<span class="sd">        modified_before</span>
<span class="sd">            Query records that were modified before the given date/time</span>
<span class="sd">        modified_after</span>
<span class="sd">            Query records that were modified after the given date/time</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a user in the given list (usernames or IDs)</span>
<span class="sd">        owner_group</span>
<span class="sd">            Query records owned by a group in the given list (group names or IDS)</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of records to return. Note that the server limit is always obeyed.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;record_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_id</span><span class="p">),</span>
            <span class="s2">&quot;record_type&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_type</span><span class="p">),</span>
            <span class="s2">&quot;manager_name&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">manager_name</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">status</span><span class="p">),</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">),</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">parent_id</span><span class="p">),</span>
            <span class="s2">&quot;child_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">child_id</span><span class="p">),</span>
            <span class="s2">&quot;created_before&quot;</span><span class="p">:</span> <span class="n">created_before</span><span class="p">,</span>
            <span class="s2">&quot;created_after&quot;</span><span class="p">:</span> <span class="n">created_after</span><span class="p">,</span>
            <span class="s2">&quot;modified_before&quot;</span><span class="p">:</span> <span class="n">modified_before</span><span class="p">,</span>
            <span class="s2">&quot;modified_after&quot;</span><span class="p">:</span> <span class="n">modified_after</span><span class="p">,</span>
            <span class="s2">&quot;owner_user&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_user</span><span class="p">),</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_group</span><span class="p">),</span>
            <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">BaseRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">RecordQueryFilters</span><span class="p">(</span><span class="o">**</span><span class="n">filter_dict</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">RecordQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.reset_records"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.reset_records">[docs]</a>    <span class="k">def</span> <span class="nf">reset_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">UpdateMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets running or errored records to be waiting again</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UpdateMetadata</span><span class="p">()</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">RecordModifyBody</span><span class="p">(</span><span class="n">record_ids</span><span class="o">=</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">waiting</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;patch&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/records&quot;</span><span class="p">,</span> <span class="n">RecordModifyBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">UpdateMetadata</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.cancel_records"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.cancel_records">[docs]</a>    <span class="k">def</span> <span class="nf">cancel_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">UpdateMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Marks running, waiting, or errored records as cancelled</span>

<span class="sd">        A cancelled record will not be picked up by a manager.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UpdateMetadata</span><span class="p">()</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">RecordModifyBody</span><span class="p">(</span><span class="n">record_ids</span><span class="o">=</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">cancelled</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;patch&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/records&quot;</span><span class="p">,</span> <span class="n">RecordModifyBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">UpdateMetadata</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.invalidate_records"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.invalidate_records">[docs]</a>    <span class="k">def</span> <span class="nf">invalidate_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">UpdateMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Marks a completed record as invalid</span>

<span class="sd">        An invalid record is one that supposedly successfully completed. However, after review,</span>
<span class="sd">        is not correct.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UpdateMetadata</span><span class="p">()</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">RecordModifyBody</span><span class="p">(</span><span class="n">record_ids</span><span class="o">=</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">invalid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;patch&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/records&quot;</span><span class="p">,</span> <span class="n">RecordModifyBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">UpdateMetadata</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.delete_records"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.delete_records">[docs]</a>    <span class="k">def</span> <span class="nf">delete_records</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span> <span class="n">soft_delete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">delete_children</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DeleteMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete records from the database</span>

<span class="sd">        If soft_delete is True, then the record is just marked as deleted and actually deletion may</span>
<span class="sd">        happen later. Soft delete can be undone with undelete</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_ids</span>
<span class="sd">            Reset the status of these record ids</span>
<span class="sd">        soft_delete</span>
<span class="sd">            Don&#39;t actually delete the record, just mark it for later deletion</span>
<span class="sd">        delete_children</span>
<span class="sd">            If True, attempt to delete child records as well</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DeleteMetadata</span><span class="p">()</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">RecordDeleteBody</span><span class="p">(</span><span class="n">record_ids</span><span class="o">=</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">soft_delete</span><span class="o">=</span><span class="n">soft_delete</span><span class="p">,</span> <span class="n">delete_children</span><span class="o">=</span><span class="n">delete_children</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/records/bulkDelete&quot;</span><span class="p">,</span> <span class="n">RecordDeleteBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">DeleteMetadata</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.uninvalidate_records"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.uninvalidate_records">[docs]</a>    <span class="k">def</span> <span class="nf">uninvalidate_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">UpdateMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Undo the invalidation of records</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UpdateMetadata</span><span class="p">()</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">RecordRevertBody</span><span class="p">(</span><span class="n">record_ids</span><span class="o">=</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">revert_status</span><span class="o">=</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">invalid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/records/revert&quot;</span><span class="p">,</span> <span class="n">RecordRevertBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">UpdateMetadata</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.uncancel_records"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.uncancel_records">[docs]</a>    <span class="k">def</span> <span class="nf">uncancel_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">UpdateMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Undo the cancellation of records</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UpdateMetadata</span><span class="p">()</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">RecordRevertBody</span><span class="p">(</span><span class="n">record_ids</span><span class="o">=</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">revert_status</span><span class="o">=</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">cancelled</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/records/revert&quot;</span><span class="p">,</span> <span class="n">RecordRevertBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">UpdateMetadata</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.undelete_records"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.undelete_records">[docs]</a>    <span class="k">def</span> <span class="nf">undelete_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">UpdateMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Undo the (soft) deletion of records</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UpdateMetadata</span><span class="p">()</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">RecordRevertBody</span><span class="p">(</span><span class="n">record_ids</span><span class="o">=</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">revert_status</span><span class="o">=</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">deleted</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/records/revert&quot;</span><span class="p">,</span> <span class="n">RecordRevertBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">UpdateMetadata</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.modify_records"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.modify_records">[docs]</a>    <span class="k">def</span> <span class="nf">modify_records</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
        <span class="n">new_tag</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">new_priority</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PriorityEnum</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UpdateMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modify the tag or priority of a record</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UpdateMetadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">new_tag</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">new_priority</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UpdateMetadata</span><span class="p">()</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">RecordModifyBody</span><span class="p">(</span><span class="n">record_ids</span><span class="o">=</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">new_tag</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="n">new_priority</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;patch&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/records&quot;</span><span class="p">,</span> <span class="n">RecordModifyBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">UpdateMetadata</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.add_comment"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_comment">[docs]</a>    <span class="k">def</span> <span class="nf">add_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span> <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UpdateMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a comment to records</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_ids</span>
<span class="sd">            The record or records to add the comments to</span>

<span class="sd">        comment</span>
<span class="sd">            The comment string to add. Your username will be added automatically</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Metadata about which records were updated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UpdateMetadata</span><span class="p">()</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">RecordModifyBody</span><span class="p">(</span><span class="n">record_ids</span><span class="o">=</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;patch&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/records&quot;</span><span class="p">,</span> <span class="n">RecordModifyBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">UpdateMetadata</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># Singlepoint calculations</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.add_singlepoints"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_singlepoints">[docs]</a>    <span class="k">def</span> <span class="nf">add_singlepoints</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">molecules</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Molecule</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Molecule</span><span class="p">]]],</span>
        <span class="n">program</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">driver</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">basis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">keywords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">protocols</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">SinglepointProtocols</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="n">priority</span><span class="p">:</span> <span class="n">PriorityEnum</span> <span class="o">=</span> <span class="n">PriorityEnum</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds new singlepoint computations to the server</span>

<span class="sd">        This checks if the calculations already exist in the database. If so, it returns</span>
<span class="sd">        the existing id, otherwise it will insert it and return the new id.</span>

<span class="sd">        This will add one record per molecule.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        molecules</span>
<span class="sd">            The Molecules or Molecule ids to compute with the above methods</span>
<span class="sd">        program</span>
<span class="sd">            The computational program to execute the result with (e.g., &quot;rdkit&quot;, &quot;psi4&quot;).</span>
<span class="sd">        driver</span>
<span class="sd">            The primary result that the compute will acquire {&quot;energy&quot;, &quot;gradient&quot;, &quot;hessian&quot;, &quot;properties&quot;}</span>
<span class="sd">        method</span>
<span class="sd">            The computational method to use (e.g., &quot;B3LYP&quot;, &quot;PBE&quot;)</span>
<span class="sd">        basis</span>
<span class="sd">            The basis to apply to the computation (e.g., &quot;cc-pVDZ&quot;, &quot;6-31G&quot;)</span>
<span class="sd">        keywords</span>
<span class="sd">            The program-specific keywords for the computation</span>
<span class="sd">        protocols</span>
<span class="sd">            Protocols for storing more/less data for each computation</span>
<span class="sd">        tag</span>
<span class="sd">            The tag for the task. This will assist in routing to appropriate compute managers.</span>
<span class="sd">        priority</span>
<span class="sd">            The priority of the job (high, normal, low). Default is normal.</span>
<span class="sd">        owner_group</span>
<span class="sd">            Group with additional permission for these records</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Metadata about the insertion, and a list of record ids. The ids will be in the</span>
<span class="sd">            order of the input molecules</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">molecules</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">molecules</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">molecules</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">InsertMetadata</span><span class="p">(),</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">molecules</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;add_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot add </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">molecules</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;add_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;molecules&quot;</span><span class="p">:</span> <span class="n">molecules</span><span class="p">,</span>
            <span class="s2">&quot;specification&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">program</span><span class="p">,</span>
                <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="n">driver</span><span class="p">,</span>
                <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                <span class="s2">&quot;basis&quot;</span><span class="p">:</span> <span class="n">basis</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="n">priority</span><span class="p">,</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">owner_group</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># If these are None, then let the pydantic models handle the defaults</span>
        <span class="k">if</span> <span class="n">keywords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;specification&quot;</span><span class="p">][</span><span class="s2">&quot;keywords&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">keywords</span>
        <span class="k">if</span> <span class="n">protocols</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;specification&quot;</span><span class="p">][</span><span class="s2">&quot;protocols&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">protocols</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/singlepoint/bulkCreate&quot;</span><span class="p">,</span>
            <span class="n">SinglepointAddBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_singlepoints"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_singlepoints">[docs]</a>    <span class="k">def</span> <span class="nf">get_singlepoints</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
        <span class="n">missing_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">SinglepointRecord</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">SinglepointRecord</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain singlepoint records with the specified IDs.</span>

<span class="sd">        Records will be returned in the same order as the record ids.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_ids</span>
<span class="sd">            Single ID or sequence/list of records to obtain</span>
<span class="sd">        missing_ok</span>
<span class="sd">            If set to True, then missing records will be tolerated, and the returned</span>
<span class="sd">            records will contain None for the corresponding IDs that were not found.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            If a single ID was specified, returns just that record. Otherwise, returns</span>
<span class="sd">            a list of records.  If missing_ok was specified, None will be substituted for a record</span>
<span class="sd">            that was not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_single</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;get_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot get </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;get_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">record_ids</span><span class="p">,</span> <span class="s2">&quot;missing_ok&quot;</span><span class="p">:</span> <span class="n">missing_ok</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SinglepointRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">record_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/singlepoint/bulkGet&quot;</span><span class="p">,</span>
            <span class="n">CommonBulkGetBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">SinglepointRecord</span><span class="o">.</span><span class="n">_DataModel</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">records</span> <span class="o">=</span> <span class="p">[</span><span class="n">SinglepointRecord</span><span class="o">.</span><span class="n">from_datamodel</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">record_data</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_single</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span></div>

<div class="viewcode-block" id="PortalClient.query_singlepoints"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_singlepoints">[docs]</a>    <span class="k">def</span> <span class="nf">query_singlepoints</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">record_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">manager_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">driver</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">SinglepointDriver</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">SinglepointDriver</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">basis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">keywords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">molecule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Queries singlepoint records on the server</span>

<span class="sd">        Do not count on the returned records being in any particular order.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_id</span>
<span class="sd">            Query records whose ID is in the given list</span>
<span class="sd">        manager_name</span>
<span class="sd">            Query records that were completed (or are currently runnning) on a manager is in the given list</span>
<span class="sd">        status</span>
<span class="sd">            Query records whose status is in the given list</span>
<span class="sd">        dataset_id</span>
<span class="sd">            Query records that are part of a dataset is in the given list</span>
<span class="sd">        parent_id</span>
<span class="sd">            Query records that have a parent is in the given list</span>
<span class="sd">        created_before</span>
<span class="sd">            Query records that were created before the given date/time</span>
<span class="sd">        created_after</span>
<span class="sd">            Query records that were created after the given date/time</span>
<span class="sd">        modified_before</span>
<span class="sd">            Query records that were modified before the given date/time</span>
<span class="sd">        modified_after</span>
<span class="sd">            Query records that were modified after the given date/time</span>
<span class="sd">        program</span>
<span class="sd">            Query records whose program is in the given list</span>
<span class="sd">        driver</span>
<span class="sd">            Query records whose driver is in the given list</span>
<span class="sd">        method</span>
<span class="sd">            Query records whose method is in the given list</span>
<span class="sd">        basis</span>
<span class="sd">            Query records whose basis is in the given list</span>
<span class="sd">        keywords</span>
<span class="sd">            Query records with these keywords (exact match)</span>
<span class="sd">        molecule_id</span>
<span class="sd">            Query records whose molecule (id) is in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a user in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a group in the given list</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of records to return. Note that the server limit is always obeyed.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Note - singlepoints don&#39;t have any children</span>
        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;record_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_id</span><span class="p">),</span>
            <span class="s2">&quot;manager_name&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">manager_name</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">status</span><span class="p">),</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">),</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">parent_id</span><span class="p">),</span>
            <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">program</span><span class="p">),</span>
            <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">driver</span><span class="p">),</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">method</span><span class="p">),</span>
            <span class="s2">&quot;basis&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">basis</span><span class="p">),</span>
            <span class="s2">&quot;keywords&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">keywords</span><span class="p">),</span>
            <span class="s2">&quot;molecule_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">molecule_id</span><span class="p">),</span>
            <span class="s2">&quot;created_before&quot;</span><span class="p">:</span> <span class="n">created_before</span><span class="p">,</span>
            <span class="s2">&quot;created_after&quot;</span><span class="p">:</span> <span class="n">created_after</span><span class="p">,</span>
            <span class="s2">&quot;modified_before&quot;</span><span class="p">:</span> <span class="n">modified_before</span><span class="p">,</span>
            <span class="s2">&quot;modified_after&quot;</span><span class="p">:</span> <span class="n">modified_after</span><span class="p">,</span>
            <span class="s2">&quot;owner_user&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_user</span><span class="p">),</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_group</span><span class="p">),</span>
            <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SinglepointRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">SinglepointQueryFilters</span><span class="p">(</span><span class="o">**</span><span class="n">filter_dict</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">RecordQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">,</span> <span class="s2">&quot;singlepoint&quot;</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># Optimization calculations</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.add_optimizations"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_optimizations">[docs]</a>    <span class="k">def</span> <span class="nf">add_optimizations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">initial_molecules</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Molecule</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Molecule</span><span class="p">]]],</span>
        <span class="n">program</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">qc_specification</span><span class="p">:</span> <span class="n">QCSpecification</span><span class="p">,</span>
        <span class="n">keywords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">protocols</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OptimizationProtocols</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="n">priority</span><span class="p">:</span> <span class="n">PriorityEnum</span> <span class="o">=</span> <span class="n">PriorityEnum</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds new geometry optimization calculations to the server</span>

<span class="sd">        This checks if the calculations already exist in the database. If so, it returns</span>
<span class="sd">        the existing id, otherwise it will insert it and return the new id.</span>

<span class="sd">        This will add one record per initial molecule.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        initial_molecules</span>
<span class="sd">            Initial molecule/geometry to optimize</span>
<span class="sd">        program</span>
<span class="sd">            Which program to use for the optimization (ie, geometric)</span>
<span class="sd">        qc_specification</span>
<span class="sd">            The method, basis, etc, to optimize the geometry with</span>
<span class="sd">        keywords</span>
<span class="sd">            Program-specific keywords for the optimization program (not the qc program)</span>
<span class="sd">        protocols</span>
<span class="sd">            Protocols for storing more/less data for each computation (for the optimization)</span>
<span class="sd">        tag</span>
<span class="sd">            The tag for the task. This will assist in routing to appropriate compute managers.</span>
<span class="sd">        priority</span>
<span class="sd">            The priority of the job (high, normal, low). Default is normal.</span>
<span class="sd">        owner_group</span>
<span class="sd">            Group with additional permission for these records</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Metadata about the insertion, and a list of record ids. The ids will be in the</span>
<span class="sd">            order of the input molecules</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">initial_molecules</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">initial_molecules</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">initial_molecules</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">InsertMetadata</span><span class="p">(),</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">initial_molecules</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;add_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot add </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="s1">&#39;initial_molecules&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;add_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;initial_molecules&quot;</span><span class="p">:</span> <span class="n">initial_molecules</span><span class="p">,</span>
            <span class="s2">&quot;specification&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">program</span><span class="p">,</span>
                <span class="s2">&quot;qc_specification&quot;</span><span class="p">:</span> <span class="n">qc_specification</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="n">priority</span><span class="p">,</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">owner_group</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># If these are None, then let the pydantic models handle the defaults</span>
        <span class="k">if</span> <span class="n">keywords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;specification&quot;</span><span class="p">][</span><span class="s2">&quot;keywords&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">keywords</span>
        <span class="k">if</span> <span class="n">protocols</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;specification&quot;</span><span class="p">][</span><span class="s2">&quot;protocols&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">protocols</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/optimization/bulkCreate&quot;</span><span class="p">,</span>
            <span class="n">OptimizationAddBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_optimizations"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_optimizations">[docs]</a>    <span class="k">def</span> <span class="nf">get_optimizations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
        <span class="n">missing_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">OptimizationRecord</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">OptimizationRecord</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain optimization records with the specified IDs.</span>

<span class="sd">        Records will be returned in the same order as the record ids.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_ids</span>
<span class="sd">            Single ID or sequence/list of records to obtain</span>
<span class="sd">        missing_ok</span>
<span class="sd">            If set to True, then missing records will be tolerated, and the returned</span>
<span class="sd">            records will contain None for the corresponding IDs that were not found.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            If a single ID was specified, returns just that record. Otherwise, returns</span>
<span class="sd">            a list of records.  If missing_ok was specified, None will be substituted for a record</span>
<span class="sd">            that was not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_single</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;get_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot get </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;get_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">record_ids</span><span class="p">,</span> <span class="s2">&quot;missing_ok&quot;</span><span class="p">:</span> <span class="n">missing_ok</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">OptimizationRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">record_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/optimization/bulkGet&quot;</span><span class="p">,</span>
            <span class="n">CommonBulkGetBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">OptimizationRecord</span><span class="o">.</span><span class="n">_DataModel</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">records</span> <span class="o">=</span> <span class="p">[</span><span class="n">OptimizationRecord</span><span class="o">.</span><span class="n">from_datamodel</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">record_data</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_single</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span></div>

<div class="viewcode-block" id="PortalClient.query_optimizations"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_optimizations">[docs]</a>    <span class="k">def</span> <span class="nf">query_optimizations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">record_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">manager_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">child_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_basis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">initial_molecule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">final_molecule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Queries optimization records on the server</span>

<span class="sd">        Do not count on the returned records being in any particular order.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_id</span>
<span class="sd">            Query records whose ID is in the given list</span>
<span class="sd">        manager_name</span>
<span class="sd">            Query records that were completed (or are currently runnning) on a manager is in the given list</span>
<span class="sd">        status</span>
<span class="sd">            Query records whose status is in the given list</span>
<span class="sd">        dataset_id</span>
<span class="sd">            Query records that are part of a dataset is in the given list</span>
<span class="sd">        parent_id</span>
<span class="sd">            Query records that have a parent is in the given list</span>
<span class="sd">        child_id</span>
<span class="sd">            Query records that have a child (singlepoint calculation) is in the given list</span>
<span class="sd">        created_before</span>
<span class="sd">            Query records that were created before the given date/time</span>
<span class="sd">        created_after</span>
<span class="sd">            Query records that were created after the given date/time</span>
<span class="sd">        modified_before</span>
<span class="sd">            Query records that were modified before the given date/time</span>
<span class="sd">        modified_after</span>
<span class="sd">            Query records that were modified after the given date/time</span>
<span class="sd">        program</span>
<span class="sd">            Query records whose optimization program is in the given list</span>
<span class="sd">        qc_program</span>
<span class="sd">            Query records whose qc program is in the given list</span>
<span class="sd">        qc_method</span>
<span class="sd">            Query records whose method is in the given list</span>
<span class="sd">        qc_basis</span>
<span class="sd">            Query records whose basis is in the given list</span>
<span class="sd">        initial_molecule_id</span>
<span class="sd">            Query records whose initial molecule (id) is in the given list</span>
<span class="sd">        final_molecule_id</span>
<span class="sd">            Query records whose final molecule (id) is in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a user in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a group in the given list</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of records to return. Note that the server limit is always obeyed.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;record_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_id</span><span class="p">),</span>
            <span class="s2">&quot;manager_name&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">manager_name</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">status</span><span class="p">),</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">),</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">parent_id</span><span class="p">),</span>
            <span class="s2">&quot;child_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">child_id</span><span class="p">),</span>
            <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">program</span><span class="p">),</span>
            <span class="s2">&quot;qc_program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_program</span><span class="p">),</span>
            <span class="s2">&quot;qc_method&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_method</span><span class="p">),</span>
            <span class="s2">&quot;qc_basis&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_basis</span><span class="p">),</span>
            <span class="s2">&quot;initial_molecule_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">initial_molecule_id</span><span class="p">),</span>
            <span class="s2">&quot;final_molecule_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">final_molecule_id</span><span class="p">),</span>
            <span class="s2">&quot;created_before&quot;</span><span class="p">:</span> <span class="n">created_before</span><span class="p">,</span>
            <span class="s2">&quot;created_after&quot;</span><span class="p">:</span> <span class="n">created_after</span><span class="p">,</span>
            <span class="s2">&quot;modified_before&quot;</span><span class="p">:</span> <span class="n">modified_before</span><span class="p">,</span>
            <span class="s2">&quot;modified_after&quot;</span><span class="p">:</span> <span class="n">modified_after</span><span class="p">,</span>
            <span class="s2">&quot;owner_user&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_user</span><span class="p">),</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_group</span><span class="p">),</span>
            <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">OptimizationRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">OptimizationQueryFilters</span><span class="p">(</span><span class="o">**</span><span class="n">filter_dict</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">RecordQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">,</span> <span class="s2">&quot;optimization&quot;</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># Torsiondrive calculations</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.add_torsiondrives"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_torsiondrives">[docs]</a>    <span class="k">def</span> <span class="nf">add_torsiondrives</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">initial_molecules</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Molecule</span><span class="p">]]],</span>
        <span class="n">program</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">optimization_specification</span><span class="p">:</span> <span class="n">OptimizationSpecification</span><span class="p">,</span>
        <span class="n">keywords</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">TorsiondriveKeywords</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="n">priority</span><span class="p">:</span> <span class="n">PriorityEnum</span> <span class="o">=</span> <span class="n">PriorityEnum</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds new torsiondrive computations to the server</span>

<span class="sd">        This checks if the calculations already exist in the database. If so, it returns</span>
<span class="sd">        the existing id, otherwise it will insert it and return the new id.</span>

<span class="sd">        This will add one record per set of molecules</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        initial_molecules</span>
<span class="sd">            Molecules to start the torsiondrives. Each torsiondrive can start with</span>
<span class="sd">            multiple molecules, so this is a nested list</span>
<span class="sd">        program</span>
<span class="sd">            The program to run the torsiondrive computation with (&quot;torsiondrive&quot;)</span>
<span class="sd">        optimization_specification</span>
<span class="sd">            Specification of how each optimization of the torsiondrive should be run</span>
<span class="sd">        keywords</span>
<span class="sd">            The torsiondrive keywords for the computation</span>
<span class="sd">        tag</span>
<span class="sd">            The tag for the task. This will assist in routing to appropriate compute managers.</span>
<span class="sd">        priority</span>
<span class="sd">            The priority of the job (high, normal, low). Default is normal.</span>
<span class="sd">        owner_group</span>
<span class="sd">            Group with additional permission for these records</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Metadata about the insertion, and a list of record ids. The ids will be in the</span>
<span class="sd">            order of the input molecules</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">initial_molecules</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">InsertMetadata</span><span class="p">(),</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">initial_molecules</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;add_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot add </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">initial_molecules</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;add_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;initial_molecules&quot;</span><span class="p">:</span> <span class="n">initial_molecules</span><span class="p">,</span>
            <span class="s2">&quot;specification&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">program</span><span class="p">,</span>
                <span class="s2">&quot;optimization_specification&quot;</span><span class="p">:</span> <span class="n">optimization_specification</span><span class="p">,</span>
                <span class="s2">&quot;keywords&quot;</span><span class="p">:</span> <span class="n">keywords</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;as_service&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="n">priority</span><span class="p">,</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">owner_group</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/torsiondrive/bulkCreate&quot;</span><span class="p">,</span>
            <span class="n">TorsiondriveAddBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_torsiondrives"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_torsiondrives">[docs]</a>    <span class="k">def</span> <span class="nf">get_torsiondrives</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
        <span class="n">missing_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">TorsiondriveRecord</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">TorsiondriveRecord</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain torsiondrive records with the specified IDs.</span>

<span class="sd">        Records will be returned in the same order as the record ids.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_ids</span>
<span class="sd">            Single ID or sequence/list of records to obtain</span>
<span class="sd">        missing_ok</span>
<span class="sd">            If set to True, then missing records will be tolerated, and the returned</span>
<span class="sd">            records will contain None for the corresponding IDs that were not found.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            If a single ID was specified, returns just that record. Otherwise, returns</span>
<span class="sd">            a list of records.  If missing_ok was specified, None will be substituted for a record</span>
<span class="sd">            that was not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_single</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;get_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot get </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;get_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">record_ids</span><span class="p">,</span> <span class="s2">&quot;missing_ok&quot;</span><span class="p">:</span> <span class="n">missing_ok</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">TorsiondriveRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">record_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/torsiondrive/bulkGet&quot;</span><span class="p">,</span>
            <span class="n">CommonBulkGetBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">TorsiondriveRecord</span><span class="o">.</span><span class="n">_DataModel</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">records</span> <span class="o">=</span> <span class="p">[</span><span class="n">TorsiondriveRecord</span><span class="o">.</span><span class="n">from_datamodel</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">record_data</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_single</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span></div>

<div class="viewcode-block" id="PortalClient.query_torsiondrives"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_torsiondrives">[docs]</a>    <span class="k">def</span> <span class="nf">query_torsiondrives</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">record_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">manager_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">child_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">optimization_program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_basis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">initial_molecule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Queries torsiondrive records on the server</span>

<span class="sd">        Do not count on the returned records being in any particular order.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_id</span>
<span class="sd">            Query records whose ID is in the given list</span>
<span class="sd">        manager_name</span>
<span class="sd">            Query records that were completed (or are currently runnning) on a manager is in the given list</span>
<span class="sd">        status</span>
<span class="sd">            Query records whose status is in the given list</span>
<span class="sd">        dataset_id</span>
<span class="sd">            Query records that are part of a dataset is in the given list</span>
<span class="sd">        parent_id</span>
<span class="sd">            Query records that have a parent is in the given list</span>
<span class="sd">        child_id</span>
<span class="sd">            Query records that have a child (optimization calculation) is in the given list</span>
<span class="sd">        created_before</span>
<span class="sd">            Query records that were created before the given date/time</span>
<span class="sd">        created_after</span>
<span class="sd">            Query records that were created after the given date/time</span>
<span class="sd">        modified_before</span>
<span class="sd">            Query records that were modified before the given date/time</span>
<span class="sd">        modified_after</span>
<span class="sd">            Query records that were modified after the given date/time</span>
<span class="sd">        program</span>
<span class="sd">            Query records whose torsiondrive program is in the given list</span>
<span class="sd">        optimization_program</span>
<span class="sd">            Query records whose optimization program is in the given list</span>
<span class="sd">        qc_program</span>
<span class="sd">            Query records whose qc program is in the given list</span>
<span class="sd">        qc_method</span>
<span class="sd">            Query records whose method is in the given list</span>
<span class="sd">        qc_basis</span>
<span class="sd">            Query records whose basis is in the given list</span>
<span class="sd">        initial_molecule_id</span>
<span class="sd">            Query records whose initial molecule (id) is in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a user in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a group in the given list</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of records to return. Note that the server limit is always obeyed.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;record_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_id</span><span class="p">),</span>
            <span class="s2">&quot;manager_name&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">manager_name</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">status</span><span class="p">),</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">),</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">parent_id</span><span class="p">),</span>
            <span class="s2">&quot;child_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">child_id</span><span class="p">),</span>
            <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">program</span><span class="p">),</span>
            <span class="s2">&quot;optimization_program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">optimization_program</span><span class="p">),</span>
            <span class="s2">&quot;qc_program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_program</span><span class="p">),</span>
            <span class="s2">&quot;qc_method&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_method</span><span class="p">),</span>
            <span class="s2">&quot;qc_basis&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_basis</span><span class="p">),</span>
            <span class="s2">&quot;initial_molecule_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">initial_molecule_id</span><span class="p">),</span>
            <span class="s2">&quot;created_before&quot;</span><span class="p">:</span> <span class="n">created_before</span><span class="p">,</span>
            <span class="s2">&quot;created_after&quot;</span><span class="p">:</span> <span class="n">created_after</span><span class="p">,</span>
            <span class="s2">&quot;modified_before&quot;</span><span class="p">:</span> <span class="n">modified_before</span><span class="p">,</span>
            <span class="s2">&quot;modified_after&quot;</span><span class="p">:</span> <span class="n">modified_after</span><span class="p">,</span>
            <span class="s2">&quot;owner_user&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_user</span><span class="p">),</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_group</span><span class="p">),</span>
            <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">TorsiondriveRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">TorsiondriveQueryFilters</span><span class="p">(</span><span class="o">**</span><span class="n">filter_dict</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">RecordQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">,</span> <span class="s2">&quot;torsiondrive&quot;</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># Grid optimization calculations</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.add_gridoptimizations"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_gridoptimizations">[docs]</a>    <span class="k">def</span> <span class="nf">add_gridoptimizations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">initial_molecules</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Molecule</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Molecule</span><span class="p">]]],</span>
        <span class="n">program</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">optimization_specification</span><span class="p">:</span> <span class="n">OptimizationSpecification</span><span class="p">,</span>
        <span class="n">keywords</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">GridoptimizationKeywords</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="n">priority</span><span class="p">:</span> <span class="n">PriorityEnum</span> <span class="o">=</span> <span class="n">PriorityEnum</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds new gridoptimization computations to the server</span>

<span class="sd">        This checks if the calculations already exist in the database. If so, it returns</span>
<span class="sd">        the existing id, otherwise it will insert it and return the new id.</span>

<span class="sd">        This will add one record per initial molecule</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        initial_molecules</span>
<span class="sd">            Molecules to start the gridoptimizations. Each gridoptimization starts with</span>
<span class="sd">             a single molecule.</span>
<span class="sd">        program</span>
<span class="sd">            The program to run the gridoptimization computation with (&quot;gridoptimization&quot;)</span>
<span class="sd">        optimization_specification</span>
<span class="sd">            Specification of how each optimization of the gridoptimization should be run</span>
<span class="sd">        keywords</span>
<span class="sd">            The gridoptimization keywords for the computation</span>
<span class="sd">        tag</span>
<span class="sd">            The tag for the task. This will assist in routing to appropriate compute managers.</span>
<span class="sd">        priority</span>
<span class="sd">            The priority of the job (high, normal, low). Default is normal.</span>
<span class="sd">        owner_group</span>
<span class="sd">            Group with additional permission for these records</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Metadata about the insertion, and a list of record ids. The ids will be in the</span>
<span class="sd">            order of the input molecules</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">initial_molecules</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">initial_molecules</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">initial_molecules</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">InsertMetadata</span><span class="p">(),</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">initial_molecules</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;add_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot add </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">initial_molecules</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;add_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;initial_molecules&quot;</span><span class="p">:</span> <span class="n">initial_molecules</span><span class="p">,</span>
            <span class="s2">&quot;specification&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">program</span><span class="p">,</span>
                <span class="s2">&quot;optimization_specification&quot;</span><span class="p">:</span> <span class="n">optimization_specification</span><span class="p">,</span>
                <span class="s2">&quot;keywords&quot;</span><span class="p">:</span> <span class="n">keywords</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="n">priority</span><span class="p">,</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">owner_group</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/gridoptimization/bulkCreate&quot;</span><span class="p">,</span>
            <span class="n">GridoptimizationAddBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_gridoptimizations"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_gridoptimizations">[docs]</a>    <span class="k">def</span> <span class="nf">get_gridoptimizations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
        <span class="n">missing_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">GridoptimizationRecord</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">GridoptimizationRecord</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain gridoptimization records with the specified IDs.</span>

<span class="sd">        Records will be returned in the same order as the record ids.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_ids</span>
<span class="sd">            Single ID or sequence/list of records to obtain</span>
<span class="sd">        missing_ok</span>
<span class="sd">            If set to True, then missing records will be tolerated, and the returned</span>
<span class="sd">            records will contain None for the corresponding IDs that were not found.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            If a single ID was specified, returns just that record. Otherwise, returns</span>
<span class="sd">            a list of records.  If missing_ok was specified, None will be substituted for a record</span>
<span class="sd">            that was not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_single</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;get_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot get </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;get_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">record_ids</span><span class="p">,</span> <span class="s2">&quot;missing_ok&quot;</span><span class="p">:</span> <span class="n">missing_ok</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">GridoptimizationRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">record_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/gridoptimization/bulkGet&quot;</span><span class="p">,</span>
            <span class="n">CommonBulkGetBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">GridoptimizationRecord</span><span class="o">.</span><span class="n">_DataModel</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">records</span> <span class="o">=</span> <span class="p">[</span><span class="n">GridoptimizationRecord</span><span class="o">.</span><span class="n">from_datamodel</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">record_data</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_single</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span></div>

<div class="viewcode-block" id="PortalClient.query_gridoptimizations"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_gridoptimizations">[docs]</a>    <span class="k">def</span> <span class="nf">query_gridoptimizations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">record_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">manager_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">child_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">optimization_program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_basis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">initial_molecule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Queries gridoptimization records on the server</span>

<span class="sd">        Do not count on the returned records being in any particular order.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_id</span>
<span class="sd">            Query records whose ID is in the given list</span>
<span class="sd">        manager_name</span>
<span class="sd">            Query records that were completed (or are currently runnning) on a manager is in the given list</span>
<span class="sd">        status</span>
<span class="sd">            Query records whose status is in the given list</span>
<span class="sd">        dataset_id</span>
<span class="sd">            Query records that are part of a dataset is in the given list</span>
<span class="sd">        parent_id</span>
<span class="sd">            Query records that have a parent is in the given list</span>
<span class="sd">        child_id</span>
<span class="sd">            Query records that have a child (optimization calculation) is in the given list</span>
<span class="sd">        created_before</span>
<span class="sd">            Query records that were created before the given date/time</span>
<span class="sd">        created_after</span>
<span class="sd">            Query records that were created after the given date/time</span>
<span class="sd">        modified_before</span>
<span class="sd">            Query records that were modified before the given date/time</span>
<span class="sd">        modified_after</span>
<span class="sd">            Query records that were modified after the given date/time</span>
<span class="sd">        program</span>
<span class="sd">            Query records whose gridoptimization program is in the given list</span>
<span class="sd">        optimization_program</span>
<span class="sd">            Query records whose optimization program is in the given list</span>
<span class="sd">        qc_program</span>
<span class="sd">            Query records whose qc program is in the given list</span>
<span class="sd">        qc_method</span>
<span class="sd">            Query records whose method is in the given list</span>
<span class="sd">        qc_basis</span>
<span class="sd">            Query records whose basis is in the given list</span>
<span class="sd">        initial_molecule_id</span>
<span class="sd">            Query records whose initial molecule (id) is in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a user in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a group in the given list</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of records to return. Note that the server limit is always obeyed.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;record_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_id</span><span class="p">),</span>
            <span class="s2">&quot;manager_name&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">manager_name</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">status</span><span class="p">),</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">),</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">parent_id</span><span class="p">),</span>
            <span class="s2">&quot;child_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">child_id</span><span class="p">),</span>
            <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">program</span><span class="p">),</span>
            <span class="s2">&quot;optimization_program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">optimization_program</span><span class="p">),</span>
            <span class="s2">&quot;qc_program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_program</span><span class="p">),</span>
            <span class="s2">&quot;qc_method&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_method</span><span class="p">),</span>
            <span class="s2">&quot;qc_basis&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_basis</span><span class="p">),</span>
            <span class="s2">&quot;initial_molecule_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">initial_molecule_id</span><span class="p">),</span>
            <span class="s2">&quot;created_before&quot;</span><span class="p">:</span> <span class="n">created_before</span><span class="p">,</span>
            <span class="s2">&quot;created_after&quot;</span><span class="p">:</span> <span class="n">created_after</span><span class="p">,</span>
            <span class="s2">&quot;modified_before&quot;</span><span class="p">:</span> <span class="n">modified_before</span><span class="p">,</span>
            <span class="s2">&quot;modified_after&quot;</span><span class="p">:</span> <span class="n">modified_after</span><span class="p">,</span>
            <span class="s2">&quot;owner_user&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_user</span><span class="p">),</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_group</span><span class="p">),</span>
            <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">GridoptimizationRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">GridoptimizationQueryFilters</span><span class="p">(</span><span class="o">**</span><span class="n">filter_dict</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">RecordQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">,</span> <span class="s2">&quot;gridoptimization&quot;</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># Reactions</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.add_reactions"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_reactions">[docs]</a>    <span class="k">def</span> <span class="nf">add_reactions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">stoichiometries</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Molecule</span><span class="p">]]]],</span>
        <span class="n">program</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">singlepoint_specification</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">QCSpecification</span><span class="p">],</span>
        <span class="n">optimization_specification</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OptimizationSpecification</span><span class="p">],</span>
        <span class="n">keywords</span><span class="p">:</span> <span class="n">ReactionKeywords</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="n">priority</span><span class="p">:</span> <span class="n">PriorityEnum</span> <span class="o">=</span> <span class="n">PriorityEnum</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds new reaction computations to the server</span>

<span class="sd">        Reactions can have a singlepoint specification, optimization specification,</span>
<span class="sd">        or both; at least one must be specified. If both are specified, an optimization</span>
<span class="sd">        is done, followed by a singlepoint computation. Otherwise, only the specification</span>
<span class="sd">        that is specified is used.</span>

<span class="sd">        This checks if the calculations already exist in the database. If so, it returns</span>
<span class="sd">        the existing id, otherwise it will insert it and return the new id.</span>

<span class="sd">        This will add one record per set of molecules</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        stoichiometries</span>
<span class="sd">            Coefficients and molecules of the reaction. Each reaction has multiple</span>
<span class="sd">            molecules/coefficients, so this is a nested list</span>
<span class="sd">        program</span>
<span class="sd">            The program for running the reaction computation (&quot;reaction&quot;)</span>
<span class="sd">        singlepoint_specification</span>
<span class="sd">            The specification for singlepoint energy calculations</span>
<span class="sd">        optimization_specification</span>
<span class="sd">            The specification for optimization calculations</span>
<span class="sd">        keywords</span>
<span class="sd">            The keywords for the reaction calculation/service</span>
<span class="sd">        tag</span>
<span class="sd">            The tag for the task. This will assist in routing to appropriate compute managers.</span>
<span class="sd">        priority</span>
<span class="sd">            The priority of the job (high, normal, low). Default is normal.</span>
<span class="sd">        owner_group</span>
<span class="sd">            Group with additional permission for these records</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Metadata about the insertion, and a list of record ids. The ids will be in the</span>
<span class="sd">            order of the input molecules</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">stoichiometries</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">InsertMetadata</span><span class="p">(),</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">stoichiometries</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;add_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot add </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">stoichiometries</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;add_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;stoichiometries&quot;</span><span class="p">:</span> <span class="n">stoichiometries</span><span class="p">,</span>
            <span class="s2">&quot;specification&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">program</span><span class="p">,</span>
                <span class="s2">&quot;singlepoint_specification&quot;</span><span class="p">:</span> <span class="n">singlepoint_specification</span><span class="p">,</span>
                <span class="s2">&quot;optimization_specification&quot;</span><span class="p">:</span> <span class="n">optimization_specification</span><span class="p">,</span>
                <span class="s2">&quot;keywords&quot;</span><span class="p">:</span> <span class="n">keywords</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="n">priority</span><span class="p">,</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">owner_group</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/reaction/bulkCreate&quot;</span><span class="p">,</span>
            <span class="n">ReactionAddBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_reactions"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_reactions">[docs]</a>    <span class="k">def</span> <span class="nf">get_reactions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
        <span class="n">missing_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">ReactionRecord</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">ReactionRecord</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain reaction records with the specified IDs.</span>

<span class="sd">        Records will be returned in the same order as the record ids.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_ids</span>
<span class="sd">            Single ID or sequence/list of records to obtain</span>
<span class="sd">        missing_ok</span>
<span class="sd">            If set to True, then missing records will be tolerated, and the returned</span>
<span class="sd">            records will contain None for the corresponding IDs that were not found.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            If a single ID was specified, returns just that record. Otherwise, returns</span>
<span class="sd">            a list of records.  If missing_ok was specified, None will be substituted for a record</span>
<span class="sd">            that was not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_single</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;get_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot get </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;get_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">record_ids</span><span class="p">,</span> <span class="s2">&quot;missing_ok&quot;</span><span class="p">:</span> <span class="n">missing_ok</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ReactionRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">record_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/reaction/bulkGet&quot;</span><span class="p">,</span>
            <span class="n">CommonBulkGetBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">ReactionRecord</span><span class="o">.</span><span class="n">_DataModel</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">records</span> <span class="o">=</span> <span class="p">[</span><span class="n">ReactionRecord</span><span class="o">.</span><span class="n">from_datamodel</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">record_data</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_single</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span></div>

<div class="viewcode-block" id="PortalClient.query_reactions"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_reactions">[docs]</a>    <span class="k">def</span> <span class="nf">query_reactions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">record_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">manager_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">child_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">optimization_program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_basis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">molecule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Queries reaction records on the server</span>

<span class="sd">        Do not count on the returned records being in any particular order.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_id</span>
<span class="sd">            Query records whose ID is in the given list</span>
<span class="sd">        manager_name</span>
<span class="sd">            Query records that were completed (or are currently runnning) on a manager is in the given list</span>
<span class="sd">        status</span>
<span class="sd">            Query records whose status is in the given list</span>
<span class="sd">        dataset_id</span>
<span class="sd">            Query records that are part of a dataset is in the given list</span>
<span class="sd">        parent_id</span>
<span class="sd">            Query records that have a parent is in the given list</span>
<span class="sd">        child_id</span>
<span class="sd">            Query records that have a child (optimization calculation) is in the given list</span>
<span class="sd">        created_before</span>
<span class="sd">            Query records that were created before the given date/time</span>
<span class="sd">        created_after</span>
<span class="sd">            Query records that were created after the given date/time</span>
<span class="sd">        modified_before</span>
<span class="sd">            Query records that were modified before the given date/time</span>
<span class="sd">        modified_after</span>
<span class="sd">            Query records that were modified after the given date/time</span>
<span class="sd">        program</span>
<span class="sd">            Query records whose reaction program is in the given list</span>
<span class="sd">        optimization_program</span>
<span class="sd">            Query records whose optimization program is in the given list</span>
<span class="sd">        qc_program</span>
<span class="sd">            Query records whose qc program is in the given list</span>
<span class="sd">        qc_method</span>
<span class="sd">            Query records whose method is in the given list</span>
<span class="sd">        qc_basis</span>
<span class="sd">            Query records whose basis is in the given list</span>
<span class="sd">        molecule_id</span>
<span class="sd">            Query reactions that contain a molecule (id) is in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a user in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a group in the given list</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of records to return. Note that the server limit is always obeyed.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;record_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_id</span><span class="p">),</span>
            <span class="s2">&quot;manager_name&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">manager_name</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">status</span><span class="p">),</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">),</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">parent_id</span><span class="p">),</span>
            <span class="s2">&quot;child_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">child_id</span><span class="p">),</span>
            <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">program</span><span class="p">),</span>
            <span class="s2">&quot;optimization_program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">optimization_program</span><span class="p">),</span>
            <span class="s2">&quot;qc_program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_program</span><span class="p">),</span>
            <span class="s2">&quot;qc_method&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_method</span><span class="p">),</span>
            <span class="s2">&quot;qc_basis&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_basis</span><span class="p">),</span>
            <span class="s2">&quot;molecule_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">molecule_id</span><span class="p">),</span>
            <span class="s2">&quot;created_before&quot;</span><span class="p">:</span> <span class="n">created_before</span><span class="p">,</span>
            <span class="s2">&quot;created_after&quot;</span><span class="p">:</span> <span class="n">created_after</span><span class="p">,</span>
            <span class="s2">&quot;modified_before&quot;</span><span class="p">:</span> <span class="n">modified_before</span><span class="p">,</span>
            <span class="s2">&quot;modified_after&quot;</span><span class="p">:</span> <span class="n">modified_after</span><span class="p">,</span>
            <span class="s2">&quot;owner_user&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_user</span><span class="p">),</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_group</span><span class="p">),</span>
            <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ReactionRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">ReactionQueryFilters</span><span class="p">(</span><span class="o">**</span><span class="n">filter_dict</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">RecordQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">,</span> <span class="s2">&quot;reaction&quot;</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># Manybody calculations</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.add_manybodys"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_manybodys">[docs]</a>    <span class="k">def</span> <span class="nf">add_manybodys</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">initial_molecules</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Molecule</span><span class="p">]],</span>
        <span class="n">program</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">singlepoint_specification</span><span class="p">:</span> <span class="n">QCSpecification</span><span class="p">,</span>
        <span class="n">keywords</span><span class="p">:</span> <span class="n">ManybodyKeywords</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="n">priority</span><span class="p">:</span> <span class="n">PriorityEnum</span> <span class="o">=</span> <span class="n">PriorityEnum</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds new manybody expansion computations to the server</span>

<span class="sd">        This checks if the calculations already exist in the database. If so, it returns</span>
<span class="sd">        the existing id, otherwise it will insert it and return the new id.</span>

<span class="sd">        This will add one record per initial molecule.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        initial_molecules</span>
<span class="sd">            Initial molecules for the manybody expansion. Must have &gt; 1 fragments.</span>
<span class="sd">        program</span>
<span class="sd">            The program to run the manybody computation with (&quot;manybody&quot;)</span>
<span class="sd">        singlepoint_specification</span>
<span class="sd">            Specification for the singlepoint calculations done in the expansion</span>
<span class="sd">        keywords</span>
<span class="sd">            The keywords for the manybody program</span>
<span class="sd">        tag</span>
<span class="sd">            The tag for the task. This will assist in routing to appropriate compute managers.</span>
<span class="sd">        priority</span>
<span class="sd">            The priority of the job (high, normal, low). Default is normal.</span>
<span class="sd">        owner_group</span>
<span class="sd">            Group with additional permission for these records</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Metadata about the insertion, and a list of record ids. The ids will be in the</span>
<span class="sd">            order of the input molecules</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">initial_molecules</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">initial_molecules</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">initial_molecules</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">InsertMetadata</span><span class="p">(),</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">initial_molecules</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;add_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot add </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">initial_molecules</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;add_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;initial_molecules&quot;</span><span class="p">:</span> <span class="n">initial_molecules</span><span class="p">,</span>
            <span class="s2">&quot;specification&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">program</span><span class="p">,</span>
                <span class="s2">&quot;singlepoint_specification&quot;</span><span class="p">:</span> <span class="n">singlepoint_specification</span><span class="p">,</span>
                <span class="s2">&quot;keywords&quot;</span><span class="p">:</span> <span class="n">keywords</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="n">priority</span><span class="p">,</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">owner_group</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/manybody/bulkCreate&quot;</span><span class="p">,</span>
            <span class="n">ManybodyAddBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_manybodys"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_manybodys">[docs]</a>    <span class="k">def</span> <span class="nf">get_manybodys</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
        <span class="n">missing_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">ManybodyRecord</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">ManybodyRecord</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain manybody records with the specified IDs.</span>

<span class="sd">        Records will be returned in the same order as the record ids.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_ids</span>
<span class="sd">            Single ID or sequence/list of records to obtain</span>
<span class="sd">        missing_ok</span>
<span class="sd">            If set to True, then missing records will be tolerated, and the returned</span>
<span class="sd">            records will contain None for the corresponding IDs that were not found.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            If a single ID was specified, returns just that record. Otherwise, returns</span>
<span class="sd">            a list of records.  If missing_ok was specified, None will be substituted for a record</span>
<span class="sd">            that was not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_single</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;get_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot get </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;get_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">record_ids</span><span class="p">,</span> <span class="s2">&quot;missing_ok&quot;</span><span class="p">:</span> <span class="n">missing_ok</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ManybodyRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">record_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/manybody/bulkGet&quot;</span><span class="p">,</span>
            <span class="n">CommonBulkGetBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">ManybodyRecord</span><span class="o">.</span><span class="n">_DataModel</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">records</span> <span class="o">=</span> <span class="p">[</span><span class="n">ManybodyRecord</span><span class="o">.</span><span class="n">from_datamodel</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">record_data</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_single</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span></div>

<div class="viewcode-block" id="PortalClient.query_manybodys"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_manybodys">[docs]</a>    <span class="k">def</span> <span class="nf">query_manybodys</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">record_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">manager_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">child_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_basis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">initial_molecule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Queries reaction records on the server</span>

<span class="sd">        Do not count on the returned records being in any particular order.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record_id</span>
<span class="sd">            Query records whose ID is in the given list</span>
<span class="sd">        manager_name</span>
<span class="sd">            Query records that were completed (or are currently runnning) on a manager is in the given list</span>
<span class="sd">        status</span>
<span class="sd">            Query records whose status is in the given list</span>
<span class="sd">        dataset_id</span>
<span class="sd">            Query records that are part of a dataset is in the given list</span>
<span class="sd">        parent_id</span>
<span class="sd">            Query records that have a parent is in the given list</span>
<span class="sd">        child_id</span>
<span class="sd">            Query records that have a child (optimization calculation) is in the given list</span>
<span class="sd">        created_before</span>
<span class="sd">            Query records that were created before the given date/time</span>
<span class="sd">        created_after</span>
<span class="sd">            Query records that were created after the given date/time</span>
<span class="sd">        modified_before</span>
<span class="sd">            Query records that were modified before the given date/time</span>
<span class="sd">        modified_after</span>
<span class="sd">            Query records that were modified after the given date/time</span>
<span class="sd">        program</span>
<span class="sd">            Query records whose reaction program is in the given list</span>
<span class="sd">        qc_program</span>
<span class="sd">            Query records whose qc program is in the given list</span>
<span class="sd">        qc_method</span>
<span class="sd">            Query records whose qc method is in the given list</span>
<span class="sd">        qc_basis</span>
<span class="sd">            Query records whose qc basis is in the given list</span>
<span class="sd">        initial_molecule_id</span>
<span class="sd">            Query manybody calculations that contain an initial molecule (id) is in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a user in the given list</span>
<span class="sd">        owner_user</span>
<span class="sd">            Query records owned by a group in the given list</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of records to return. Note that the server limit is always obeyed.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned record</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;record_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_id</span><span class="p">),</span>
            <span class="s2">&quot;manager_name&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">manager_name</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">status</span><span class="p">),</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">),</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">parent_id</span><span class="p">),</span>
            <span class="s2">&quot;child_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">child_id</span><span class="p">),</span>
            <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">program</span><span class="p">),</span>
            <span class="s2">&quot;qc_program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_program</span><span class="p">),</span>
            <span class="s2">&quot;qc_method&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_method</span><span class="p">),</span>
            <span class="s2">&quot;qc_basis&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_basis</span><span class="p">),</span>
            <span class="s2">&quot;initial_molecule_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">initial_molecule_id</span><span class="p">),</span>
            <span class="s2">&quot;created_before&quot;</span><span class="p">:</span> <span class="n">created_before</span><span class="p">,</span>
            <span class="s2">&quot;created_after&quot;</span><span class="p">:</span> <span class="n">created_after</span><span class="p">,</span>
            <span class="s2">&quot;modified_before&quot;</span><span class="p">:</span> <span class="n">modified_before</span><span class="p">,</span>
            <span class="s2">&quot;modified_after&quot;</span><span class="p">:</span> <span class="n">modified_after</span><span class="p">,</span>
            <span class="s2">&quot;owner_user&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_user</span><span class="p">),</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_group</span><span class="p">),</span>
            <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ManybodyRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">ManybodyQueryFilters</span><span class="p">(</span><span class="o">**</span><span class="n">filter_dict</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">RecordQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">,</span> <span class="s2">&quot;manybody&quot;</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># NEB</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.add_nebs"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_nebs">[docs]</a>    <span class="k">def</span> <span class="nf">add_nebs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">initial_chains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Molecule</span><span class="p">]]],</span>
        <span class="n">program</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">singlepoint_specification</span><span class="p">:</span> <span class="n">QCSpecification</span><span class="p">,</span>
        <span class="n">keywords</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">NEBKeywords</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="n">priority</span><span class="p">:</span> <span class="n">PriorityEnum</span> <span class="o">=</span> <span class="n">PriorityEnum</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds neb calculations to the server</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">initial_chains</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">InsertMetadata</span><span class="p">(),</span> <span class="p">[]</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;initial_chains&quot;</span><span class="p">:</span> <span class="n">initial_chains</span><span class="p">,</span>
            <span class="s2">&quot;specification&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">program</span><span class="p">,</span>
                <span class="s2">&quot;singlepoint_specification&quot;</span><span class="p">:</span> <span class="n">singlepoint_specification</span><span class="p">,</span>
                <span class="s2">&quot;keywords&quot;</span><span class="p">:</span> <span class="n">keywords</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="n">priority</span><span class="p">,</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">owner_group</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;initial_chains&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;add_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot add </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">body_data</span><span class="p">[</span><span class="s1">&#39;initial_chains&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;add_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/neb/bulkCreate&quot;</span><span class="p">,</span>
            <span class="n">NEBAddBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">InsertMetadata</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_nebs"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_nebs">[docs]</a>    <span class="k">def</span> <span class="nf">get_nebs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">record_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
        <span class="n">missing_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">NEBRecord</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">NEBRecord</span><span class="p">]]]:</span>

        <span class="n">is_single</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record_ids</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span>

        <span class="n">record_ids</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s2">&quot;get_records&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot get </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">record_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> records - over the limit of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_limits</span><span class="p">[</span><span class="s1">&#39;get_records&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">record_ids</span><span class="p">,</span> <span class="s2">&quot;missing_ok&quot;</span><span class="p">:</span> <span class="n">missing_ok</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">body_data</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">NEBRecord</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">record_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/records/neb/bulkGet&quot;</span><span class="p">,</span>
            <span class="n">CommonBulkGetBody</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">NEBRecord</span><span class="o">.</span><span class="n">_DataModel</span><span class="p">]],</span>
            <span class="n">body_data</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">records</span> <span class="o">=</span> <span class="p">[</span><span class="n">NEBRecord</span><span class="o">.</span><span class="n">from_datamodel</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">record_data</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_single</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">records</span></div>

<div class="viewcode-block" id="PortalClient.query_nebs"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_nebs">[docs]</a>    <span class="k">def</span> <span class="nf">query_nebs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">record_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">manager_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">child_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">created_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">qc_basis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">initial_chain_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">owner_group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Queries neb records from the server.&quot;&quot;&quot;</span>

        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;record_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">record_id</span><span class="p">),</span>
            <span class="s2">&quot;manager_name&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">manager_name</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">status</span><span class="p">),</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">),</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">parent_id</span><span class="p">),</span>
            <span class="s2">&quot;child_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">child_id</span><span class="p">),</span>
            <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">program</span><span class="p">),</span>
            <span class="s2">&quot;qc_program&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_program</span><span class="p">),</span>
            <span class="s2">&quot;qc_method&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_method</span><span class="p">),</span>
            <span class="s2">&quot;qc_basis&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">qc_basis</span><span class="p">),</span>
            <span class="s2">&quot;initial_chain_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">initial_chain_id</span><span class="p">),</span>
            <span class="s2">&quot;created_before&quot;</span><span class="p">:</span> <span class="n">created_before</span><span class="p">,</span>
            <span class="s2">&quot;created_after&quot;</span><span class="p">:</span> <span class="n">created_after</span><span class="p">,</span>
            <span class="s2">&quot;modified_before&quot;</span><span class="p">:</span> <span class="n">modified_before</span><span class="p">,</span>
            <span class="s2">&quot;modified_after&quot;</span><span class="p">:</span> <span class="n">modified_after</span><span class="p">,</span>
            <span class="s2">&quot;owner_user&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_user</span><span class="p">),</span>
            <span class="s2">&quot;owner_group&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">owner_group</span><span class="p">),</span>
            <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">include</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">NEBQueryFilters</span><span class="p">(</span><span class="o">**</span><span class="n">filter_dict</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">RecordQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">,</span> <span class="s2">&quot;neb&quot;</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># Managers</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.get_managers"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_managers">[docs]</a>    <span class="k">def</span> <span class="nf">get_managers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">missing_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">ComputeManager</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">ComputeManager</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Obtain manager information from the server with the specified names</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        names</span>
<span class="sd">            A manager name or list of names</span>
<span class="sd">        missing_ok</span>
<span class="sd">            If set to True, then missing managers will be tolerated, and the returned</span>
<span class="sd">            managers will contain None for the corresponding managers that were not found.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned managers</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            If a single name was specified, returns just that manager. Otherwise, returns</span>
<span class="sd">            a list of managers.  If missing_ok was specified, None will be substituted for a manager</span>
<span class="sd">            that was not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_single</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>

        <span class="n">names</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">names</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">CommonBulkGetNamesBody</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span> <span class="n">missing_ok</span><span class="o">=</span><span class="n">missing_ok</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">body_data</span><span class="o">.</span><span class="n">include</span> <span class="o">=</span> <span class="n">ComputeManager</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">managers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/managers/bulkGet&quot;</span><span class="p">,</span> <span class="n">CommonBulkGetNamesBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">ComputeManager</span><span class="p">]],</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">is_single</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">managers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">managers</span></div>

<div class="viewcode-block" id="PortalClient.query_managers"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_managers">[docs]</a>    <span class="k">def</span> <span class="nf">query_managers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">manager_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cluster</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">hostname</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">RecordStatusEnum</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modified_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ManagerQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Queries manager information on the server</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        manager_id</span>
<span class="sd">            ID assigned to the manager (this is not the UUID. This should be used very rarely).</span>
<span class="sd">        name</span>
<span class="sd">            Queries managers whose name is in the given list</span>
<span class="sd">        cluster</span>
<span class="sd">            Queries managers whose assigned cluster is in the given list</span>
<span class="sd">        hostname</span>
<span class="sd">            Queries managers whose hostname is in the given list</span>
<span class="sd">        status</span>
<span class="sd">            Queries managers whose status is in the given list</span>
<span class="sd">        modified_before</span>
<span class="sd">            Query for managers last modified before a certain time</span>
<span class="sd">        modified_after</span>
<span class="sd">            Query for managers last modified after a certain time</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of managers to return. Note that the server limit is always obeyed.</span>
<span class="sd">        include</span>
<span class="sd">            Additional fields to include in the returned managers</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;manager_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">manager_id</span><span class="p">),</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;cluster&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">cluster</span><span class="p">),</span>
            <span class="s2">&quot;hostname&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">hostname</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">status</span><span class="p">),</span>
            <span class="s2">&quot;modified_before&quot;</span><span class="p">:</span> <span class="n">modified_before</span><span class="p">,</span>
            <span class="s2">&quot;modified_after&quot;</span><span class="p">:</span> <span class="n">modified_after</span><span class="p">,</span>
            <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">include</span><span class="p">:</span>
            <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;include&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ComputeManager</span><span class="o">.</span><span class="n">transform_includes</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">ManagerQueryFilters</span><span class="p">(</span><span class="o">**</span><span class="n">filter_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ManagerQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># Server statistics and logs</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.query_server_stats"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_server_stats">[docs]</a>    <span class="k">def</span> <span class="nf">query_server_stats</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServerStatsQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query server statistics</span>

<span class="sd">        These statistics are captured at certain times, and are available for querying (as long</span>
<span class="sd">        as they are not deleted)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        before</span>
<span class="sd">            Return statistics captured before the specified date/time</span>
<span class="sd">        after</span>
<span class="sd">            Return statistics captured after the specified date/time</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of statistics entries to return. Note that the server limit is always obeyed.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">ServerStatsQueryFilters</span><span class="p">(</span><span class="n">before</span><span class="o">=</span><span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="n">after</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ServerStatsQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.delete_server_stats"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.delete_server_stats">[docs]</a>    <span class="k">def</span> <span class="nf">delete_server_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">before</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete server statistics from the server</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        before</span>
<span class="sd">            Delete statistics captured before the given date/time</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            The number of statistics entries deleted from the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">DeleteBeforeDateBody</span><span class="p">(</span><span class="n">before</span><span class="o">=</span><span class="n">before</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/server_stats/bulkDelete&quot;</span><span class="p">,</span> <span class="n">DeleteBeforeDateBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.query_access_log"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_access_log">[docs]</a>    <span class="k">def</span> <span class="nf">query_access_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">access_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccessLogQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query the server access log</span>

<span class="sd">        This log contains information about who accessed the server, and when.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        access_type</span>
<span class="sd">            Return log entries whose access_type is in the given list</span>
<span class="sd">        access_method</span>
<span class="sd">            Return log entries whose access_method is in the given list</span>
<span class="sd">        before</span>
<span class="sd">            Return log entries captured before the specified date/time</span>
<span class="sd">        after</span>
<span class="sd">            Return log entries captured after the specified date/time</span>
<span class="sd">        user</span>
<span class="sd">            User name or ID associated with the log entry</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of log entries to return. Note that the server limit is always obeyed.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">AccessLogQueryFilters</span><span class="p">(</span>
            <span class="n">access_type</span><span class="o">=</span><span class="n">make_list</span><span class="p">(</span><span class="n">access_type</span><span class="p">),</span>
            <span class="n">access_method</span><span class="o">=</span><span class="n">make_list</span><span class="p">(</span><span class="n">access_method</span><span class="p">),</span>
            <span class="n">before</span><span class="o">=</span><span class="n">before</span><span class="p">,</span>
            <span class="n">after</span><span class="o">=</span><span class="n">after</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="n">make_list</span><span class="p">(</span><span class="n">user</span><span class="p">),</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">AccessLogQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.delete_access_log"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.delete_access_log">[docs]</a>    <span class="k">def</span> <span class="nf">delete_access_log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">before</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete access log entries from the server</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        before</span>
<span class="sd">            Delete access log entries captured before the given date/time</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            The number of access log entries deleted from the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="n">DeleteBeforeDateBody</span><span class="p">(</span><span class="n">before</span><span class="o">=</span><span class="n">before</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/access_logs/bulkDelete&quot;</span><span class="p">,</span> <span class="n">DeleteBeforeDateBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.query_error_log"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_error_log">[docs]</a>    <span class="k">def</span> <span class="nf">query_error_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">error_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ErrorLogQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query the server&#39;s internal error log</span>

<span class="sd">        This log contains internal errors that are not always passed to the user.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        error_id</span>
<span class="sd">            Return error log entries whose id is in the list</span>
<span class="sd">        user</span>
<span class="sd">            Return error log entries whose user name or ID is in the list</span>
<span class="sd">        before</span>
<span class="sd">            Return error log entries captured before the specified date/time</span>
<span class="sd">        after</span>
<span class="sd">            Return error log entries captured after the specified date/time</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of log entries to return. Note that the server limit is always obeyed.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">ErrorLogQueryFilters</span><span class="p">(</span>
            <span class="n">error_id</span><span class="o">=</span><span class="n">make_list</span><span class="p">(</span><span class="n">error_id</span><span class="p">),</span>
            <span class="n">user</span><span class="o">=</span><span class="n">make_list</span><span class="p">(</span><span class="n">user</span><span class="p">),</span>
            <span class="n">before</span><span class="o">=</span><span class="n">before</span><span class="p">,</span>
            <span class="n">after</span><span class="o">=</span><span class="n">after</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">ErrorLogQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.delete_error_log"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.delete_error_log">[docs]</a>    <span class="k">def</span> <span class="nf">delete_error_log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">before</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete error log entries from the server</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        before</span>
<span class="sd">            Delete error log entries captured before the given date/time</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            The number of error log entries deleted from the server</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">body_data</span> <span class="o">=</span> <span class="n">DeleteBeforeDateBody</span><span class="p">(</span><span class="n">before</span><span class="o">=</span><span class="n">before</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/server_errors/bulkDelete&quot;</span><span class="p">,</span> <span class="n">DeleteBeforeDateBody</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">body_data</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_internal_job"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_internal_job">[docs]</a>    <span class="k">def</span> <span class="nf">get_internal_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">InternalJob</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets information about an internal job on the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/internal_jobs/</span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">InternalJob</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.query_internal_jobs"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_internal_jobs">[docs]</a>    <span class="k">def</span> <span class="nf">query_internal_jobs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">job_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">runner_hostname</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">InternalJobStatusEnum</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">InternalJobStatusEnum</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last_updated_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last_updated_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">added_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">added_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">scheduled_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">scheduled_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">InternalJobQueryIterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Queries the internal job queue on the server</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        job_id</span>
<span class="sd">            ID assigned to the job</span>
<span class="sd">        name</span>
<span class="sd">            Queries jobs whose name is in the given list</span>
<span class="sd">        user</span>
<span class="sd">            User name or ID associated with the log entry</span>
<span class="sd">        runner_hostname</span>
<span class="sd">            Queries jobs that were run/are running on a given host</span>
<span class="sd">        status</span>
<span class="sd">            Queries jobs whose status is in the given list</span>
<span class="sd">        last_updated_before</span>
<span class="sd">            Query for jobs last updated before a certain time</span>
<span class="sd">        last_updated_after</span>
<span class="sd">            Query for jobs last updated after a certain time</span>
<span class="sd">        added_before</span>
<span class="sd">            Query for jobs added before a certain time</span>
<span class="sd">        added_after</span>
<span class="sd">            Query for jobs added after a certain time</span>
<span class="sd">        scheduled_before</span>
<span class="sd">            Query for jobs scheduled to run before a certain time</span>
<span class="sd">        scheduled_after</span>
<span class="sd">            Query for jobs scheduled to run after a certain time</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of jobs to return. Note that the server limit is always obeyed.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            An iterator that can be used to retrieve the results of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filter_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;job_id&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">job_id</span><span class="p">),</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;runner_hostname&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">runner_hostname</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">status</span><span class="p">),</span>
            <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="n">make_list</span><span class="p">(</span><span class="n">user</span><span class="p">),</span>
            <span class="s2">&quot;last_updated_before&quot;</span><span class="p">:</span> <span class="n">last_updated_before</span><span class="p">,</span>
            <span class="s2">&quot;last_updated_after&quot;</span><span class="p">:</span> <span class="n">last_updated_after</span><span class="p">,</span>
            <span class="s2">&quot;added_before&quot;</span><span class="p">:</span> <span class="n">added_before</span><span class="p">,</span>
            <span class="s2">&quot;added_after&quot;</span><span class="p">:</span> <span class="n">added_after</span><span class="p">,</span>
            <span class="s2">&quot;scheduled_before&quot;</span><span class="p">:</span> <span class="n">scheduled_before</span><span class="p">,</span>
            <span class="s2">&quot;scheduled_after&quot;</span><span class="p">:</span> <span class="n">scheduled_after</span><span class="p">,</span>
            <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">filter_data</span> <span class="o">=</span> <span class="n">InternalJobQueryFilters</span><span class="p">(</span><span class="o">**</span><span class="n">filter_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">InternalJobQueryIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.cancel_internal_job"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.cancel_internal_job">[docs]</a>    <span class="k">def</span> <span class="nf">cancel_internal_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cancels (to the best of our ability) an internal job</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;put&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;v1/internal_jobs/</span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2">/status&quot;</span><span class="p">,</span>
            <span class="n">InternalJobStatusEnum</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">InternalJobStatusEnum</span><span class="o">.</span><span class="n">cancelled</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.delete_internal_job"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.delete_internal_job">[docs]</a>    <span class="k">def</span> <span class="nf">delete_internal_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/internal_jobs/</span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.query_access_summary"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.query_access_summary">[docs]</a>    <span class="k">def</span> <span class="nf">query_access_summary</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">group_by</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span>
        <span class="n">before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccessLogSummary</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Obtains summaries of access data</span>

<span class="sd">        This aggregate data is created on the server, so you don&#39;t need to download all the</span>
<span class="sd">        log entries and do it yourself.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group_by</span>
<span class="sd">            How to group the data. Valid options are &quot;user&quot;, &quot;hour&quot;, &quot;day&quot;, &quot;country&quot;, &quot;subdivision&quot;</span>
<span class="sd">        before</span>
<span class="sd">            Query for log entries with a timestamp before a specific time</span>
<span class="sd">        after</span>
<span class="sd">            Query for log entries with a timestamp after a specific time</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">url_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;group_by&quot;</span><span class="p">:</span> <span class="n">group_by</span><span class="p">,</span>
            <span class="s2">&quot;before&quot;</span><span class="p">:</span> <span class="n">before</span><span class="p">,</span>
            <span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="n">after</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;get&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v1/access_logs/summary&quot;</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">AccessLogSummaryFilters</span><span class="p">,</span>
            <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">AccessLogSummaryEntry</span><span class="p">]],</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">url_params</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">AccessLogSummary</span><span class="p">(</span><span class="n">entries</span><span class="o">=</span><span class="n">entries</span><span class="p">)</span></div>

    <span class="c1">##############################################################</span>
    <span class="c1"># User, group, &amp; role management</span>
    <span class="c1">##############################################################</span>

<div class="viewcode-block" id="PortalClient.list_roles"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.list_roles">[docs]</a>    <span class="k">def</span> <span class="nf">list_roles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RoleInfo</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List all user roles on the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/roles&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">RoleInfo</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_role"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_role">[docs]</a>    <span class="k">def</span> <span class="nf">get_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rolename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RoleInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get information about a role on the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_valid_rolename</span><span class="p">(</span><span class="n">rolename</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/roles/</span><span class="si">{</span><span class="n">rolename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">RoleInfo</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.add_role"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_role">[docs]</a>    <span class="k">def</span> <span class="nf">add_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">role_info</span><span class="p">:</span> <span class="n">RoleInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a role with permissions to the server</span>

<span class="sd">        If not successful, an exception is raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_valid_rolename</span><span class="p">(</span><span class="n">role_info</span><span class="o">.</span><span class="n">rolename</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/roles&quot;</span><span class="p">,</span> <span class="n">RoleInfo</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">role_info</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.modify_role"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.modify_role">[docs]</a>    <span class="k">def</span> <span class="nf">modify_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">role_info</span><span class="p">:</span> <span class="n">RoleInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RoleInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modifies the permissions of a role on the server</span>

<span class="sd">        If not successful, an exception is raised.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            A copy of the role as it now appears on the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">is_valid_rolename</span><span class="p">(</span><span class="n">role_info</span><span class="o">.</span><span class="n">rolename</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;put&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/roles/</span><span class="si">{</span><span class="n">role_info</span><span class="o">.</span><span class="n">rolename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">RoleInfo</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">RoleInfo</span><span class="p">,</span> <span class="n">role_info</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.delete_role"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.delete_role">[docs]</a>    <span class="k">def</span> <span class="nf">delete_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rolename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes a role from the server</span>

<span class="sd">        This will not delete any role to which a user is assigned</span>

<span class="sd">        Will raise an exception on error</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rolename</span>
<span class="sd">            Name of the role to delete</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_valid_rolename</span><span class="p">(</span><span class="n">rolename</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/roles/</span><span class="si">{</span><span class="n">rolename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.list_groups"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.list_groups">[docs]</a>    <span class="k">def</span> <span class="nf">list_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">GroupInfo</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List all user groups on the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/groups&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">GroupInfo</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_group"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">groupname_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">GroupInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get information about a group on the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">groupname_or_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">is_valid_groupname</span><span class="p">(</span><span class="n">groupname_or_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/groups/</span><span class="si">{</span><span class="n">groupname_or_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">GroupInfo</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.add_group"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_group">[docs]</a>    <span class="k">def</span> <span class="nf">add_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_info</span><span class="p">:</span> <span class="n">GroupInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a group with permissions to the server</span>

<span class="sd">        If not successful, an exception is raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">group_info</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Cannot add group when group_info contains an id&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/groups&quot;</span><span class="p">,</span> <span class="n">GroupInfo</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">group_info</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.delete_group"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.delete_group">[docs]</a>    <span class="k">def</span> <span class="nf">delete_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">groupname_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes a group on the server</span>

<span class="sd">        Deleted groups will be removed from all users groups list</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">groupname_or_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">is_valid_groupname</span><span class="p">(</span><span class="n">groupname_or_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/groups/</span><span class="si">{</span><span class="n">groupname_or_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.list_users"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.list_users">[docs]</a>    <span class="k">def</span> <span class="nf">list_users</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">UserInfo</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List all user roles on the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/users&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">UserInfo</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.get_user"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.get_user">[docs]</a>    <span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get information about a user on the server</span>

<span class="sd">        If the username is not supplied, then info about the currently logged-in user is obtained.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        username_or_id</span>
<span class="sd">            The username or ID to get info about</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            Information about the user</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">username_or_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">username_or_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">username_or_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">is_valid_username</span><span class="p">(</span><span class="n">username_or_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">username_or_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Cannot get user - not logged in?&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/users/</span><span class="si">{</span><span class="n">username_or_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">UserInfo</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.add_user"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.add_user">[docs]</a>    <span class="k">def</span> <span class="nf">add_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_info</span><span class="p">:</span> <span class="n">UserInfo</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a user to the server</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        user_info</span>
<span class="sd">            Info about the user to add</span>
<span class="sd">        password</span>
<span class="sd">            The user&#39;s password. If None, then one will be generated</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            The password of the user (either the same as the supplied password, or the</span>
<span class="sd">            server-generated one)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">password</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">is_valid_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Cannot add user when user_info contains an id&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;v1/users&quot;</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">UserInfo</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="p">(</span><span class="n">user_info</span><span class="p">,</span> <span class="n">password</span><span class="p">),</span> <span class="kc">None</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.modify_user"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.modify_user">[docs]</a>    <span class="k">def</span> <span class="nf">modify_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_info</span><span class="p">:</span> <span class="n">UserInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modifies a user on the server</span>

<span class="sd">        The user is determined by the id field of the input UserInfo, although the id</span>
<span class="sd">        and username are checked for consistency.</span>

<span class="sd">        Depending on the current user&#39;s permissions, some fields may not be updatable.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        user_info</span>
<span class="sd">            Updated information for a user</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            The updated user information as it appears on the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;patch&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/users&quot;</span><span class="p">,</span> <span class="n">UserInfo</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">UserInfo</span><span class="p">,</span> <span class="n">user_info</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.change_user_password"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.change_user_password">[docs]</a>    <span class="k">def</span> <span class="nf">change_user_password</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">username_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">new_password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change a users password</span>

<span class="sd">        If the username is not specified, then the current logged-in user is used.</span>

<span class="sd">        If the password is not specified, then one is automatically generated by the server.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        username_or_id</span>
<span class="sd">            The name or ID of the user whose password to change. If None, then use the currently logged-in user</span>
<span class="sd">        new_password</span>
<span class="sd">            Password to change to. If None, let the server generate one.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :</span>
<span class="sd">            The new password (either the same as the supplied one, or the server generated one</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">username_or_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">username_or_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span>

        <span class="k">if</span> <span class="n">username_or_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Cannot change user - not logged in?&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">username_or_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">is_valid_username</span><span class="p">(</span><span class="n">username_or_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">new_password</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">is_valid_password</span><span class="p">(</span><span class="n">new_password</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span>
            <span class="s2">&quot;put&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/users/</span><span class="si">{</span><span class="n">username_or_id</span><span class="si">}</span><span class="s2">/password&quot;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_password</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PortalClient.delete_user"><a class="viewcode-back" href="../../user_guide/qcportal_reference.html#qcportal.client.PortalClient.delete_user">[docs]</a>    <span class="k">def</span> <span class="nf">delete_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete a user from the server</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">username_or_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">is_valid_username</span><span class="p">(</span><span class="n">username_or_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_request</span><span class="p">(</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v1/users/</span><span class="si">{</span><span class="n">username_or_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div></div>
</pre></div>

            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2018-2023, The Molecular Sciences Software Institute.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">
        PyData Sphinx Theme
    </a>
    0.12.0.
</p>
  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>