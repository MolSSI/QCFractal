Computation record basics
=====================================

A *record* is a representation of a single computation that is stored on the server. Records are generally
not created by hand by the user, but retrieved from the server.

Records contain an ID that uniquely identifies this record on the server.

Record Retrieval
================

Using the :class:`~qcportal.client.PortalClient`, records are retrieved from the server in two ways.
The first is through ``get_`` functions,  which is used to retrieve records by their ID.
These functions (such as :func:`~qcportal.client.PortalClient.get_records` and :func:`~qcportal.client.PortalClient.get_singlepoints`)
take a list or other sequence of IDs, and returns a list of records in the same order as the given IDs::

    >>> records = c.get_records([245, 827])
    >>> print(records[0].id, records[1].id)
    245 827

If a single ID is specified rather than a list, then just that record is returned (not a list)

    >>> records = c.get_records(245)
    >>> print(records.id)
    245

If a record is not found, then an exception is raised. This can be suppressed with ``missing_ok=True``, in which
case missing records are returned as ``None``

    >>> records = c.get_records([245, 827, 9999999])
    >>> print(records[2])
    None


Querying
^^^^^^^^

The second way of retrieving records is by querying the server using ``query_`` functions
(:func:`~qcportal.client.PortalClient.query_records`, :func:`~qcportal.client.PortalClient.query_singlepoints`, etc).
These functions have a lot of parameters, allowing you to query based on dates, molecules, and other
calculation features.

.. caution::

   The records returned from query functions are not in any defined order, and the order may be different
   even with repeated calls with the same arguments

Query functions return an :class:`iterator <qcportal.record_models.RecordQueryIterator>` object.
This iterator handles transparent and efficient fetching from the server in
batches, especially when many records may be returned by a query::

    >>> record_it = c.query_records(record_type='singlepoint', created_before='2021-02-01')
    >>> for record in record_it:
    ...    print(record.id)
    114296306
    114296305
    114296304
      ...

Records that are returned must match all query parameters.
Query functions can take lists or iterables for most parameters as well, in which case records that match
any within the list will be returned. For example, the following finds errored or complete records
that were recently modified::

    >>> record_it = c.query_records(status=['complete', 'error'], modified_after='2022-12-01')
    >>> for record in record_it:
    ...    print(record.id)
    81798273
    79692444
      ...

Query functions for different records types (such as :func:`~qcportal.client.PortalClient.query_singlepoints`)
take more parameters that are specific to that computation (such as basis set for singlepoints, initial molecule for
optimizations, etc).


Common features
===============

Metadata
^^^^^^^^





Next steps
----------

- View the :doc:`basic record API <baserecord_api>`

- See documentation about the individual kinds of records

  - :doc:`Singlepoint records <singlepoint>`
  - :doc:`Optimization records <optimization>`
  - :doc:`Torsiondrive records <torsiondrive>`
  - :doc:`Gridoptimization records <gridoptimization>`
  - :doc:`Manybody records <manybody>`
  - :doc:`Reaction records <reaction>`