

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Using datasets &#8212; QCArchive 0.50b9.post3+gb4bcac4f documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/datasets';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Computation Types" href="records/index.html" />
    <link rel="prev" title="Managing Records" href="record_management.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/qcarchive_logo.svg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/qcarchive_logo_inverted.svg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
    <p class="title logo__title">QCArchive</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../admin_guide/index.html">
                        Admin Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../web_api/index.html">
                        Web API
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../developer_guide/index.html">
                        Developer Guide
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://molssi.org">
                    MolSSI
                  </a>
                </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/MolSSI/QCFractal" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../admin_guide/index.html">
                        Admin Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../web_api/index.html">
                        Web API
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../developer_guide/index.html">
                        Developer Guide
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://molssi.org">
                    MolSSI
                  </a>
                </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/MolSSI/QCFractal" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="client_setup.html">QCPortal Installation &amp; Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="connecting_qcportal.html">Connecting to a server</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Interpreting metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="query_iterators.html">Query Iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="molecule.html">Molecules</a></li>
<li class="toctree-l1"><a class="reference internal" href="record_retrieval.html">Retrieving records</a></li>
<li class="toctree-l1"><a class="reference internal" href="record_submission.html">Submitting computations</a></li>
<li class="toctree-l1"><a class="reference internal" href="record_management.html">Managing Records</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Using datasets</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="records/index.html">Computation Types</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="records/base.html">Base Record</a></li>

<li class="toctree-l2"><a class="reference internal" href="records/singlepoint.html">Singlepoint calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="records/optimization.html">Optimization calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="records/gridoptimization.html">Gridoptimization calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="records/torsiondrive.html">Torsiondrive calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="records/manybody.html">Manybody calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="records/reaction.html">Reaction calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="records/neb.html">NEB calculations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="qcportal_reference.html">QCPortal API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="webapi_reference.html">Web API</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">QCArchive User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Using datasets</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="using-datasets">
<h1>Using datasets<a class="headerlink" href="#using-datasets" title="Permalink to this heading">#</a></h1>
<p>A <em>dataset</em> is a relatively homogeneous collection of records that allows for
submission and management of a large number of computations.</p>
<p>A dataset is made up of entries, specifications, and records.
It can be thought of as a table, where the <em>entries</em> are rows of the
table, and <em>specifications</em> are the columns. A cell within the table
(intersection between a row /entry and column/specification) is a <a class="reference internal" href="../overview/glossary.html#glossary-record"><span class="std std-ref">record</span></a>.</p>
<p>Below is an example of this analogy, where the records are identified by their ID.
For example, record 18263 is an HF/sto-3g computation on water, and
record 23210 is an MP2/cc-pvdz computation on ethanol.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Entry</p></th>
<th class="head"><p>HF/sto-3g</p></th>
<th class="head"><p>B3LYP/def2-tzvp</p></th>
<th class="head"><p>MP2/cc-pvdz</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>water</strong></p></td>
<td><p>18263</p></td>
<td><p>18277</p></td>
<td><p>18295</p></td>
</tr>
<tr class="row-odd"><td><p><strong>methane</strong></p></td>
<td><p>19722</p></td>
<td><p>19642</p></td>
<td><p>19867</p></td>
</tr>
<tr class="row-even"><td><p><strong>ethanol</strong></p></td>
<td><p>20212</p></td>
<td><p>20931</p></td>
<td><p>23210</p></td>
</tr>
</tbody>
</table>
<p>Using a dataset allows for control of entire rows and columns of the table, and even
the entire table itself. As an example, you can add a new specification, and then easily
submit computations for that specification that apply to all the existing entries.</p>
<p>Dataset entries, specifications, and records are dependent on the type of dataset; different dataset types
have different types for these items. That is, entries in a <a class="reference internal" href="records/singlepoint.html#singlepoint-dataset"><span class="std std-ref">Singlepoint Dataset</span></a> are different than entries
in an <a class="reference internal" href="records/optimization.html#optimization-dataset"><span class="std std-ref">Optimization Dataset</span></a>, and the same is true for specifications.</p>
<section id="dataset-limitations">
<h2>Dataset Limitations<a class="headerlink" href="#dataset-limitations" title="Permalink to this heading">#</a></h2>
<p>A dataset can only contain one type of calculation. For example, you can have a <a class="reference internal" href="records/singlepoint.html#singlepoint-dataset"><span class="std std-ref">Singlepoint Dataset</span></a>
or a <a class="reference internal" href="records/optimization.html#optimization-dataset"><span class="std std-ref">Optimization Dataset</span></a>, but not a dataset that contains both single point and optimization
calculations.</p>
<p>A specification should work for all entries in the dataset. There is some limited ability to override
keywords on a per-entry basis, but there is no way to assign a different basis for a particular entry.</p>
</section>
<section id="retrieving-datasets">
<h2>Retrieving Datasets<a class="headerlink" href="#retrieving-datasets" title="Permalink to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When retrieving a dataset, only a limited about of data is downloaded first. After that, operations such as
retrieving entries or records will require contacting the server. This is generally done transparently.</p>
</div>
<p>Datasets have unique ID, and a unique name. The unique name only applies to datasets of the same type,
so two datasets can have the same name as long as they are of different types. The names are not case sensitive.</p>
<p>You can retrieve a dataset with via its ID with <a class="reference internal" href="qcportal_reference.html#qcportal.client.PortalClient.get_dataset_by_id" title="qcportal.client.PortalClient.get_dataset_by_id"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_dataset_by_id()</span></code></a>
and its name with <a class="reference internal" href="qcportal_reference.html#qcportal.client.PortalClient.get_dataset" title="qcportal.client.PortalClient.get_dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_dataset()</span></code></a></p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_dataset_by_id</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">dataset_type</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="go">123 singlepoint Organic molecule energies</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_dataset</span><span class="p">(</span><span class="s2">&quot;optimization&quot;</span><span class="p">,</span> <span class="s2">&quot;Diatomic geometries&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">dataset_type</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="go">52 optimization Diatomic geometries</span>
</pre></div>
</div>
</section>
<section id="adding-datasets">
<h2>Adding Datasets<a class="headerlink" href="#adding-datasets" title="Permalink to this heading">#</a></h2>
<p>Datasets can be created on a server with the <a class="reference internal" href="qcportal_reference.html#qcportal.client.PortalClient.add_dataset" title="qcportal.client.PortalClient.add_dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_dataset()</span></code></a>
function of the <a class="reference internal" href="qcportal_reference.html#qcportal.client.PortalClient" title="qcportal.client.PortalClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">PortalClient</span></code></a>. This function returns the dataset:</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">add_dataset</span><span class="p">(</span><span class="s2">&quot;optimization&quot;</span><span class="p">,</span> <span class="s2">&quot;Optimization of important molecules&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="go">27</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="qcportal_reference.html#qcportal.client.PortalClient.add_dataset" title="qcportal.client.PortalClient.add_dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_dataset()</span></code></a> takes several optional arguments, including
some for descriptions of the dataset as well as default priority and <a class="reference internal" href="../overview/tasks_services.html#routing-tags"><span class="std std-ref">tags</span></a>.</p>
</section>
<section id="dataset-metadata">
<h2>Dataset Metadata<a class="headerlink" href="#dataset-metadata" title="Permalink to this heading">#</a></h2>
<p>Datasets have some useful metadata and properties</p>
<ul class="simple">
<li><p><strong>name</strong>, <strong>description</strong>, <strong>tagline</strong>, <strong>group</strong>, and <strong>tags</strong> are user-defined metadata that categorize this dataset
among the other datasets</p></li>
<li><p><strong>default_tag</strong> and <strong>default_priority</strong> are the defaults used when submitting new computations (can be overridden
in <a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.submit" title="qcportal.dataset_models.BaseDataset.submit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">submit()</span></code></a>, see <a class="reference internal" href="#dataset-submission"><span class="std std-ref">Submitting Computations</span></a>).</p></li>
<li><p><strong>provenance</strong> is a user-defined dictionary with any provenance or source information</p></li>
<li><p><strong>metadata</strong> is a user-defined dictionary with any other metadata the user wants to attach to the dataset</p></li>
</ul>
<p>This metadata is created when the dataset is constructed on the server, but can be changed
with <a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.set_name" title="qcportal.dataset_models.BaseDataset.set_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_name()</span></code></a>,
<a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.set_description" title="qcportal.dataset_models.BaseDataset.set_description"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_description()</span></code></a>,
<a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.set_metadata" title="qcportal.dataset_models.BaseDataset.set_metadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_metadata()</span></code></a>, and so on.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
<span class="go">Optimization of diatomic molecules at different levels of theory</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="s2">&quot;A new description&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># It has been changed on the server</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_dataset_by_id</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
<span class="go">A new description</span>
</pre></div>
</div>
<section id="status">
<h3>Status<a class="headerlink" href="#status" title="Permalink to this heading">#</a></h3>
<p>The <a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.status" title="qcportal.dataset_models.BaseDataset.status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">status()</span></code></a> returns a dictionary describing the status of the computations.
This is indexed by specification</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span> <span class="o">&gt;&gt;&gt;</span> <span class="n">ds</span><span class="o">.</span><span class="n">status</span><span class="p">()</span>
 <span class="p">{</span><span class="s1">&#39;pbe0/sto-3g&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">complete</span><span class="p">:</span> <span class="s1">&#39;complete&#39;</span><span class="o">&gt;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">error</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="o">&gt;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
<span class="s1">&#39;b3lyp/def2-tzvp&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">error</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="o">&gt;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">complete</span><span class="p">:</span> <span class="s1">&#39;complete&#39;</span><span class="o">&gt;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
<span class="s1">&#39;pbe/6-31g&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">complete</span><span class="p">:</span> <span class="s1">&#39;complete&#39;</span><span class="o">&gt;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">RecordStatusEnum</span><span class="o">.</span><span class="n">error</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="o">&gt;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}}</span>
</pre></div>
</div>
<p>If you are in an interactive session or notebook, or just want a prettier version, you can use
<a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.status_table" title="qcportal.dataset_models.BaseDataset.status_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">status_table()</span></code></a> returns a table as a string, and
<a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.print_status" title="qcportal.dataset_models.BaseDataset.print_status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">print_status()</span></code></a> prints a table of the statuses.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">print_status_</span><span class="p">()</span>
<span class="go">    specification    complete    error    invalid</span>
<span class="go">-----------------  ----------  -------  ---------</span>
<span class="go">    pbe/def2-tzvp           3        2</span>
<span class="go">       pbe/sto-3g           4        1</span>
<span class="go">       pbe0/6-31g           4        1</span>
<span class="go">     pbe0/6-31g**           4        1</span>
<span class="go"> pbe0/aug-cc-pvtz           3        1          1</span>
<span class="go">   pbe0/def2-tzvp           4        1</span>
<span class="go">      pbe0/sto-3g           4        1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The status is computed on the server, and does require download all the records. This does mean the the
status may reflect changes to records that have been retrieved, and so may be out of sync with any
local caching.</p>
</div>
</section>
</section>
<section id="specifications-and-entries">
<h2>Specifications and Entries<a class="headerlink" href="#specifications-and-entries" title="Permalink to this heading">#</a></h2>
<p>The specifications of the dataset are available with the <code class="docutils literal notranslate"><span class="pre">.specification_names</span></code> and <code class="docutils literal notranslate"><span class="pre">.specifications</span></code> properties.
<code class="docutils literal notranslate"><span class="pre">.specifications</span></code> returns a dictionary, with the key being the name of the specification.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">specification_names</span><span class="p">)</span>
<span class="go">[&#39;hf/sto-3g&#39;, &#39;hf/def2-tzvp&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">specifications</span><span class="p">[</span><span class="s1">&#39;hf/sto-3g&#39;</span><span class="p">])</span>
<span class="go">name=&#39;hf/sto-3g&#39; specification=OptimizationSpecification(program=&#39;geometric&#39;,</span>
<span class="go">qc_specification=QCSpecification(program=&#39;psi4&#39;, driver=&lt;SinglepointDriver.deferred: &#39;deferred&#39;&gt;, method=&#39;hf&#39;,</span>
<span class="go">basis=&#39;sto-3g&#39;, keywords={&#39;maxiter&#39;: 100}, protocols=AtomicResultProtocols(wavefunction=&lt;WavefunctionProtocolEnum.none: &#39;none&#39;&gt;,</span>
<span class="go">stdout=True, error_correction=ErrorCorrectionProtocol(default_policy=True, policies=None),</span>
<span class="go">native_files=&lt;NativeFilesProtocolEnum.none: &#39;none&#39;&gt;)), keywords={},</span>
<span class="go">protocols=OptimizationProtocols(trajectory=&lt;TrajectoryProtocolEnum.all: &#39;all&#39;&gt;)) description=None</span>
</pre></div>
</div>
<p>Entries are slightly different. Since it is expected that a dataset may have many entries, only the names
are accessible all at once</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">entry_names</span><span class="p">)</span>
<span class="go">[&#39;H2&#39;, &#39;N2&#39;, &#39;O2&#39;, &#39;F2&#39;, &#39;Hg2&#39;]</span>
</pre></div>
</div>
<p>You can obtain a full entry from its name with <a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.get_entry" title="qcportal.dataset_models.BaseDataset.get_entry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_entry()</span></code></a>:</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">get_entry</span><span class="p">)</span>
<span class="go">OptimizationDatasetEntry(name=&#39;H2&#39;, initial_molecule=Molecule(name=&#39;H2&#39;, formula=&#39;H2&#39;, hash=&#39;7746e69&#39;),</span>
<span class="go">additional_keywords={}, attributes={}, comment=None)</span>
</pre></div>
</div>
<p>If you need to get all entries, you may iterate over the entries with
<a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.iterate_entries" title="qcportal.dataset_models.BaseDataset.iterate_entries"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iterate_entries()</span></code></a>:</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">iterate_entries</span><span class="p">():</span>
<span class="gp">... </span>   <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">initial_molecule</span><span class="p">)</span>
<span class="go">Molecule(name=&#39;H2&#39;, formula=&#39;H2&#39;, hash=&#39;7746e69&#39;)</span>
<span class="go">Molecule(name=&#39;N2&#39;, formula=&#39;N2&#39;, hash=&#39;609abf3&#39;)</span>
<span class="go">Molecule(name=&#39;O2&#39;, formula=&#39;O2&#39;, hash=&#39;018caee&#39;)</span>
<span class="go">Molecule(name=&#39;F2&#39;, formula=&#39;F2&#39;, hash=&#39;7ffa835&#39;)</span>
<span class="go">Molecule(name=&#39;Hg2&#39;, formula=&#39;Hg2&#39;, hash=&#39;a67cb93&#39;)</span>
</pre></div>
</div>
<p><a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.iterate_entries" title="qcportal.dataset_models.BaseDataset.iterate_entries"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iterate_entries()</span></code></a> can also be restricted to only iterate over certain
entry names.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">iterate_entries</span><span class="p">(</span><span class="n">entry_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;H2&#39;</span><span class="p">,</span> <span class="s1">&#39;O2&#39;</span><span class="p">]):</span>
<span class="gp">... </span>   <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">initial_molecule</span><span class="p">)</span>
<span class="go">Molecule(name=&#39;H2&#39;, formula=&#39;H2&#39;, hash=&#39;7746e69&#39;)</span>
<span class="go">Molecule(name=&#39;O2&#39;, formula=&#39;O2&#39;, hash=&#39;018caee&#39;)</span>
</pre></div>
</div>
</section>
<section id="retrieving-records">
<h2>Retrieving Records<a class="headerlink" href="#retrieving-records" title="Permalink to this heading">#</a></h2>
<p>A single records can be retrieved by entry name and specification name
with <a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.get_record" title="qcportal.dataset_models.BaseDataset.get_record"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_record()</span></code></a></p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rec</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">get_record</span><span class="p">(</span><span class="s1">&#39;H2&#39;</span><span class="p">,</span> <span class="s1">&#39;hf/sto-3g&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
<span class="go">&lt;OptimizationRecord id=3 status=complete&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">final_molecule</span><span class="p">)</span>
<span class="go">Molecule(name=&#39;H2&#39;, formula=&#39;H2&#39;, hash=&#39;6c7a0a9&#39;)</span>
</pre></div>
</div>
<p>Multiple records (or all records) can be obtained by using the iterator returned from
<a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.iterate_records" title="qcportal.dataset_models.BaseDataset.iterate_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iterate_records()</span></code></a>. The iterator return a tuple of three
values - the entry name, specification name, and then the full record.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">e_name</span><span class="p">,</span> <span class="n">s_name</span><span class="p">,</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">iterate_records</span><span class="p">():</span>
<span class="gp">... </span>  <span class="nb">print</span><span class="p">(</span><span class="n">e_name</span><span class="p">,</span> <span class="n">s_name</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
<span class="go">H2 hf/sto-3g 3 RecordStatusEnum.complete</span>
<span class="go">N2 hf/sto-3g 1 RecordStatusEnum.complete</span>
<span class="go">O2 hf/sto-3g 4 RecordStatusEnum.complete</span>
<span class="go">F2 hf/sto-3g 5 RecordStatusEnum.complete</span>
<span class="go">Hg2 hf/sto-3g 2 RecordStatusEnum.error</span>
<span class="go">H2 hf/def2-tzvp 8 RecordStatusEnum.complete</span>
<span class="go">N2 hf/def2-tzvp 9 RecordStatusEnum.complete</span>
<span class="go">O2 hf/def2-tzvp 6 RecordStatusEnum.complete</span>
</pre></div>
</div>
<p><a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.iterate_records" title="qcportal.dataset_models.BaseDataset.iterate_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iterate_records()</span></code></a> also has filtering options, including
by entry name, specification name, and status</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">e_name</span><span class="p">,</span> <span class="n">s_name</span><span class="p">,</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">iterate_records</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="s1">&#39;error&#39;</span><span class="p">):</span>
<span class="gp">... </span>  <span class="nb">print</span><span class="p">(</span><span class="n">e_name</span><span class="p">,</span> <span class="n">s_name</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
<span class="go">Hg2 hf/sto-3g 2 RecordStatusEnum.error</span>
<span class="go">Hg2 hf/def2-tzvp 10 RecordStatusEnum.error</span>
<span class="go">Hg2 hf/6-31g 15 RecordStatusEnum.error</span>
<span class="go">Hg2 hf/6-31g** 17 RecordStatusEnum.error</span>
</pre></div>
</div>
<p>If the record was previously retrieved, it won’t be retrieved again unless it has been updated on the server. This can
be overridden with <code class="docutils literal notranslate"><span class="pre">force_refetch=True</span></code> which will always download a fresh record.</p>
</section>
<section id="manipulating-entries-and-specifications">
<h2>Manipulating Entries and Specifications<a class="headerlink" href="#manipulating-entries-and-specifications" title="Permalink to this heading">#</a></h2>
<p>Entries and specifications can be added with <code class="docutils literal notranslate"><span class="pre">add_entries</span></code>, <code class="docutils literal notranslate"><span class="pre">add_entry</span></code>, and <code class="docutils literal notranslate"><span class="pre">add_specification</span></code>.
The details of these functions depend on the type of dataset - see <a class="reference internal" href="records/index.html"><span class="doc">Computation Types</span></a>. The following examples
are for an <a class="reference internal" href="records/optimization.html#optimization-dataset"><span class="std std-ref">optimization dataset</span></a>.</p>
<p>Both entries and specifications are given descriptive names, which can be use later in other functions
(like <a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.get_record" title="qcportal.dataset_models.BaseDataset.get_record"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_record()</span></code></a>).</p>
<p>When entries or specifications are added, the changes are reflected immediately on the server.</p>
<p>First, we add some entries to this dataset. For an optimization dataset, an entry corresponds to
an unoptimized ‘initial’ molecule. Adding entries returns <a class="reference internal" href="metadata.html"><span class="doc">metadata</span></a>.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qcportal.molecules</span> <span class="kn">import</span> <span class="n">Molecule</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qcportal.optimization</span> <span class="kn">import</span> <span class="n">OptimizationDatasetEntry</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mol</span> <span class="o">=</span> <span class="n">Molecule</span><span class="p">(</span><span class="n">symbols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">],</span> <span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">add_entry</span><span class="p">(</span><span class="s2">&quot;carbon monoxide&quot;</span><span class="p">,</span> <span class="n">mol</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">meta</span><span class="p">)</span>
<span class="go">InsertMetadata(error_description=None, errors=[], inserted_idx=[0], existing_idx=[])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Can also create lots of entries and add them at once</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mol2</span> <span class="o">=</span> <span class="n">Molecule</span><span class="p">(</span><span class="n">symbols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">],</span> <span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mol3</span> <span class="o">=</span> <span class="n">Molecule</span><span class="p">(</span><span class="n">symbols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Br&#39;</span><span class="p">,</span> <span class="s1">&#39;Br&#39;</span><span class="p">],</span> <span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">entry2</span> <span class="o">=</span> <span class="n">OptimizationDatasetEntry</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;difluorine&#39;</span><span class="p">,</span> <span class="n">initial_molecule</span><span class="o">=</span><span class="n">mol2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">entry3</span> <span class="o">=</span> <span class="n">OptimizationDatasetEntry</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;dibromine&#39;</span><span class="p">,</span> <span class="n">initial_molecule</span><span class="o">=</span><span class="n">mol3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">add_entries</span><span class="p">([</span><span class="n">entry2</span><span class="p">,</span> <span class="n">entry3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">meta</span><span class="p">)</span>
<span class="go">InsertMetadata(error_description=None, errors=[], inserted_idx=[0, 1], existing_idx=[])</span>
</pre></div>
</div>
<p>Now our dataset has three entries</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">entry_names</span><span class="p">)</span>
<span class="go">[&#39;carbon monoxide&#39;, &#39;difluorine&#39;, &#39;dibromine&#39;]</span>
</pre></div>
</div>
<p>Next, we will add some specifications. For an optimization dataset, this is an
<a class="reference internal" href="records/optimization.html#qcportal.optimization.OptimizationSpecification" title="qcportal.optimization.OptimizationSpecification"><code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationSpecification</span></code></a>.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qcportal.singlepoint</span> <span class="kn">import</span> <span class="n">SinglepointSpecification</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qcportal.optimization</span> <span class="kn">import</span> <span class="n">OptimizationSpecification</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Use geometric, compute gradients with psi4. Optimize with b3lyp/def2-tzvp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">OptimizationSpecification</span><span class="p">(</span>
<span class="gp">... </span>  <span class="n">program</span><span class="o">=</span><span class="s1">&#39;geometric&#39;</span><span class="p">,</span>
<span class="gp">... </span>  <span class="n">qc_specification</span><span class="o">=</span><span class="n">QCSpecification</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">program</span><span class="o">=</span><span class="s1">&#39;psi4&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;deferred&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">method</span><span class="o">=</span><span class="s1">&#39;b3lyp&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">basis</span><span class="o">=</span><span class="s1">&#39;def2-tzvp&#39;</span><span class="p">,</span>
<span class="gp">... </span>  <span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">add_specification</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;psi4/b3lyp/def2-tzvp&#39;</span><span class="p">,</span> <span class="n">specification</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">meta</span><span class="p">)</span>
<span class="go">InsertMetadata(error_description=None, errors=[], inserted_idx=[0], existing_idx=[])</span>
</pre></div>
</div>
</section>
<section id="submitting-computations">
<span id="dataset-submission"></span><h2>Submitting Computations<a class="headerlink" href="#submitting-computations" title="Permalink to this heading">#</a></h2>
<p>Adding entries and specifications does not immediately create the underlying records. To do that,
we use <a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.submit" title="qcportal.dataset_models.BaseDataset.submit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">submit()</span></code></a>.</p>
<p>With no arguments, this will create missing records for all entries and specifications, using the
default tag and priority of the dataset. However, you may also submit only certain entries and specifications,
or change the tag and priority.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span> <span class="c1"># Create everything</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Submit missing difluorine computations with a special tag</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">submit</span><span class="p">([</span><span class="s1">&#39;difluorine&#39;</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;special_tag&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Submit dibromine hf/sto-3g computation at a high priority</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">submit</span><span class="p">([</span><span class="s1">&#39;dibromine&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;hf/sto-3g&#39;</span><span class="p">],</span> <span class="n">priority</span><span class="o">=</span><span class="s1">&#39;high&#39;</span><span class="p">)</span>
</pre></div>
</div>
<section id="renaming-and-deleting-entries-and-specifications">
<h3>Renaming and Deleting Entries and Specifications<a class="headerlink" href="#renaming-and-deleting-entries-and-specifications" title="Permalink to this heading">#</a></h3>
<p>Entries and specifications can be renamed and deleted. Deletion can also optionally delete the underlying record.</p>
<p><a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.rename_entries" title="qcportal.dataset_models.BaseDataset.rename_entries"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rename_entries()</span></code></a> and
<a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.rename_specification" title="qcportal.dataset_models.BaseDataset.rename_specification"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rename_specification()</span></code></a>
take a dictionary of old name to new name</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">rename_entries</span><span class="p">({</span><span class="s1">&#39;difluorine&#39;</span><span class="p">:</span> <span class="s1">&#39;F2 molecule&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ent</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">get_entry</span><span class="p">(</span><span class="s1">&#39;F2 molecule&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ent</span><span class="o">.</span><span class="n">initial_molecule</span><span class="p">)</span>
<span class="go">initial_molecule=Molecule(name=&#39;F2&#39;, formula=&#39;F2&#39;, hash=&#39;7ffa835&#39;)</span>
</pre></div>
</div>
<p>Entries and specifications are deleted with
<a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.delete_entries" title="qcportal.dataset_models.BaseDataset.delete_entries"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_entries()</span></code></a> and
<a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.delete_specification" title="qcportal.dataset_models.BaseDataset.delete_specification"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_specification()</span></code></a>.
Note that deleting entries and specifications by default do not delete the records</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Keeps any records, but removes from dataset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">delete_entries</span><span class="p">([</span><span class="s1">&#39;carbon monoxide&#39;</span><span class="p">])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Deletes the records too</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">delete_specification</span><span class="p">(</span><span class="s1">&#39;hf/sto-3g&#39;</span><span class="p">,</span> <span class="n">delete_records</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="record-management">
<h2>Record Management<a class="headerlink" href="#record-management" title="Permalink to this heading">#</a></h2>
<p>Records that belong to the dataset can be managed via the usual client methods (see <a class="reference internal" href="record_management.html"><span class="doc">Managing Records</span></a>).
However, datasets have convenient methods for management, which use entry and specification names rather than record.</p>
<ul class="simple">
<li><p><a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.modify_records" title="qcportal.dataset_models.BaseDataset.modify_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">modify_records()</span></code></a></p></li>
<li><p><a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.reset_records" title="qcportal.dataset_models.BaseDataset.reset_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset_records()</span></code></a></p></li>
<li><p><a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.cancel_records" title="qcportal.dataset_models.BaseDataset.cancel_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cancel_records()</span></code></a> and <a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.uncancel_records" title="qcportal.dataset_models.BaseDataset.uncancel_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">uncancel_records()</span></code></a></p></li>
<li><p><a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.invalidate_records" title="qcportal.dataset_models.BaseDataset.invalidate_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">invalidate_records()</span></code></a> and <a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.uninvalidate_records" title="qcportal.dataset_models.BaseDataset.uninvalidate_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">uninvalidate_records()</span></code></a></p></li>
</ul>
<p>These functions are similar to the client counterparts, but instead use entry and specification names.</p>
<p>In addition, individual records can be removed from a dataset (and optionally deleted) with
<a class="reference internal" href="records/base.html#qcportal.dataset_models.BaseDataset.remove_records" title="qcportal.dataset_models.BaseDataset.remove_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">remove_records()</span></code></a>.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Reset carbon monoxide records</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">reset_records</span><span class="p">(</span><span class="n">entry_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;carbon monoxide&#39;</span><span class="p">])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Cancel pbe0/def2-qzvp computations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">cancel_records</span><span class="p">(</span><span class="n">specification_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pbe0/def2-qzvp&#39;</span><span class="p">])</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="record_management.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Managing Records</p>
      </div>
    </a>
    <a class="right-next"
       href="records/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Computation Types</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-limitations">Dataset Limitations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieving-datasets">Retrieving Datasets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-datasets">Adding Datasets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-metadata">Dataset Metadata</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#status">Status</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specifications-and-entries">Specifications and Entries</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieving-records">Retrieving Records</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-entries-and-specifications">Manipulating Entries and Specifications</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#submitting-computations">Submitting Computations</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#renaming-and-deleting-entries-and-specifications">Renaming and Deleting Entries and Specifications</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#record-management">Record Management</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../_sources/user_guide/datasets.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  



  
  
  
  
  
  
  


<div class="row h-10">
    <div class="col-2">
        <a href="https://molssi.org/" target="_blank" title="Go to MolSSI in a new tab">
            <img src="../_static/molssi_main_logo.png" class="logo__image only-light footer_logo" alt="Logo image">
            <img src="../_static/molssi_main_logo_inverted_white.png" class="logo__image only-dark footer_logo" alt="Logo image">
        </a>
    </div>
    <div class="col-8">
        <p> &copy; Copyright 2019-2023 <a href="https://molssi.org/">The Molecular Sciences Software Institute</a></p>
        <p>Funded by the National Science Foundation 
          <a href="https://nsf.gov/awardsearch/showAward?AWD_ID=1547580">OAC-1547580</a> and 
          <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2136142">CHE-2136142.</a></p>
 
        
        <p class="sphinx-version">
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 6.1.3.<br>
        </p>
        

    </div>
    <div class="col-2">
        <a href="https://nsf.gov/" target="_blank" title="Go to the NSF in a new tab">
            <img src="../_static/nsf.png" class="footer_logo" alt="The NSF">
          </a>
    </div>
</div></div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>